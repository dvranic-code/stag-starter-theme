(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

var _utils = require("../utils");
function fetch_posts() {
  const loadMoreBtn = document.querySelector(".load--more");
  if (loadMoreBtn === null) {
    return;
  }
  let postsGrid = document.querySelector(".posts-grid");
  if (postsGrid) {
    if (document.querySelector(".posts-grid").dataset.page == document.querySelector(".posts-grid").dataset.max) {
      loadMoreBtn.style.display = "none";
    }
  } else {
    if (document.querySelector(".site-main").dataset.page == document.querySelector(".site-main").dataset.max) {
      loadMoreBtn.style.display = "none";
    }
  }
  loadMoreBtn.addEventListener("click", async e => {
    e.preventDefault();
    let currentPage = '';
    let postsGrid = document.querySelector(".posts-grid");
    if (postsGrid) {
      currentPage = document.querySelector(".posts-grid").dataset.page;
    } else {
      currentPage = document.querySelector(".site-main").dataset.page;
    }
    let maxPages = document.querySelector(".site-main").dataset.max;
    let isSearch = document.querySelector(".site-main").dataset.search === "is-search";
    let searchField = document.querySelector(".search-form__search-field");
    let searchQuery = '';
    if (searchField) {
      searchQuery = searchField.value;
    }
    let isBlock = postsGrid ? postsGrid.dataset.block === "is-block" : false;
    const postsGridWrapper = document.getElementsByClassName("posts-grid__wrapper")[0];
    const postsGridBtnWrapper = document.getElementsByClassName("posts-grid__btn-wrapper")[0];
    const moreData = new FormData();
    moreData.append("action", "load_more_posts");
    moreData.append("currentPage", currentPage);
    moreData.append("searchQuery", searchQuery);
    moreData.append('_nonce', WP_vars.nonce); // eslint-disable-line

    const dataCall = await fetch(WP_vars.ajaxURL, {
      // eslint-disable-line
      method: "POST",
      body: moreData
    }).then(res => {
      if (res.ok) {
        return res.json(); // Parse the JSON response
      } else {
        throw new Error(`Request failed with status: ${res.status}`);
      }
    }).then(data => {
      if (data && data.data) {
        const htmlString = data.data[0]; // Extract the HTML content from the response

        const maxPages = data.data[1]; // Extract the max pages from the response for search
        console.log(maxPages);
        postsGridBtnWrapper.insertAdjacentHTML("beforebegin", htmlString);
        if (!isSearch && !isBlock) {
          let getUrl = window.location;
          let baseUrl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split('/')[1];
          window.history.pushState('', '', baseUrl + '/page/' + (parseInt(document.querySelector(".site-main").dataset.page) + 1));
        }
        document.querySelector(".site-main").dataset.page++;
        if (document.querySelector(".site-main").dataset.page == document.querySelector(".site-main").dataset.max) {
          loadMoreBtn.style.display = "none";
        }
        if (isBlock) {
          document.querySelector(".posts-grid").dataset.page++;
          if (document.querySelector(".posts-grid").dataset.page == document.querySelector(".posts-grid").dataset.max) {
            loadMoreBtn.style.display = "none";
          }
        }
        if (isSearch) {
          if (document.querySelector(".site-main").dataset.page == maxPages) {
            loadMoreBtn.style.display = "none";
          }
        }
      } else {
        console.warn('Invalid data received from the server');
      }
    }).catch(err => console.warn(err));
  });
}
(0, _utils.onReady)(() => {
  fetch_posts();
});

},{"../utils":5}],2:[function(require,module,exports){
"use strict";

var _utils = require("../utils");
function showMenu() {
  const navigation = document.getElementById("main-navigation");
  const menuItems = document.querySelectorAll("#main-navigation li.children-zero-level.menu-item-has-children");
  const menuOverlay = document.getElementsByClassName("site-header__nav-overlay")[0];
  if (navigation === null || menuItems.length === 0) {
    return;
  }
  menuItems.forEach(menuItem => {
    menuItem.addEventListener("mouseenter", function () {
      navigation.classList.add("menu-active");
      menuOverlay.classList.add("overlay-active");
      this.classList.add("active");
    });
    menuItem.addEventListener("mouseleave", function () {
      navigation.classList.remove("menu-active");
      menuOverlay.classList.remove("overlay-active");
      this.classList.remove("active");
    });
  });
  const subMenu = document.querySelectorAll('.sub-menu li.menu-item-has-children');
  subMenu.forEach(menuItem => {
    menuItem.addEventListener("mouseenter", function () {
      this.classList.add("active");
    });
    menuItem.addEventListener("mouseleave", function () {
      this.classList.remove("active");
    });
  });
}
function getMainNavWidth() {
  const mainNavWidth = document.getElementById("mainNavWidth");
  const getWidth = mainNavWidth.offsetWidth;
  if (getWidth === null) {
    return;
  }
  document.documentElement.style.setProperty("--mainNavWidth", getWidth + "px");
}
function toggleLanguageSwitcher(id, menuClass) {
  const body = document.getElementsByTagName('body')[0];
  const languageIcon = document.getElementById(id);
  const langSubMenu = document.getElementsByClassName(menuClass)[0];
  if (!languageIcon) return;
  languageIcon.addEventListener('click', e => {
    e.preventDefault();
    e.stopPropagation();
    langSubMenu.classList.toggle('active');
  });
  body.addEventListener('click', e => {
    if (!e.target.classList.contains(menuClass)) langSubMenu.classList.remove('active');
  });
}
function languageSwitcher() {
  toggleLanguageSwitcher("languageIcon", "lang-sub-menu");
  toggleLanguageSwitcher("languageIconMobile", "lang-sub-menu-mobile");
}
function triggerSearchBox() {
  const body = document.getElementsByTagName('body')[0];
  const triggerSearchBox = document.getElementById("triggerSearchBox");
  const triggerSearchBoxMobile = document.getElementById("triggerSearchBoxMobile");
  const searchPopup = document.getElementsByClassName("site-header__search-popup")[0];
  if (triggerSearchBox === null || searchPopup === null) {
    return;
  }
  function handleSearchBoxClick(e) {
    e.preventDefault();
    searchPopup.classList.toggle("active");
    body.classList.toggle("disable-scroll-search");
  }
  if (triggerSearchBox) {
    triggerSearchBox.addEventListener("click", handleSearchBoxClick);
  }
  if (triggerSearchBoxMobile) {
    triggerSearchBoxMobile.addEventListener("click", handleSearchBoxClick);
  }
}
function triggerMobileMenu() {
  const body = document.getElementsByTagName('body')[0];
  const hamburger = document.getElementsByClassName("site-header__mobile-wrap--hamburger")[0];
  const mobileMobileMenu = document.getElementsByClassName("mobile-menu")[0];
  if (hamburger === null) {
    return;
  }
  const childrenZeroLevel = document.querySelectorAll('#mobile-menu-navigation li.children-zero-level.menu-item-has-children');
  const childrenFirstLevel = document.querySelectorAll('#mobile-menu-navigation li.children-first-level.menu-item-has-children');
  childrenZeroLevel.forEach(zeroItem => {
    const subMenuToggle = document.createElement('span');
    subMenuToggle.classList.add('sub-menu-toggle');
    subMenuToggle.addEventListener('click', function () {
      this.classList.toggle('active');
      this.parentElement.classList.toggle('active');
    });
    zeroItem.appendChild(subMenuToggle);
  });
  childrenFirstLevel.forEach(firstLevelItem => {
    const subMenuToggleFirstLevel = document.createElement('span');
    subMenuToggleFirstLevel.classList.add('sub-menu-level-two-toggle');
    subMenuToggleFirstLevel.addEventListener('click', function () {
      this.classList.toggle('menu-active');
      this.parentElement.classList.toggle('menu-active');
    });
    firstLevelItem.appendChild(subMenuToggleFirstLevel);
  });
  hamburger.addEventListener("click", function () {
    this.classList.toggle("hamburger--active");
    mobileMobileMenu.classList.toggle("active");
    body.classList.toggle("disable-scroll-search");
  });
}
(0, _utils.onReady)(() => {
  showMenu();
  languageSwitcher();
  triggerSearchBox();
  triggerMobileMenu();

  // TODO: Remove this after fixing the font loading issue.
  setTimeout(() => {
    getMainNavWidth();
  }, 2000);
});

},{"../utils":5}],3:[function(require,module,exports){
"use strict";

var _utils = require("../utils");
function initContentSwiper() {
  if (!document.querySelectorAll(".content-slider__swiper").length) return;
  const content_swiper = new Swiper(".content-slider__swiper", {
    // eslint-disable-line
    slidesPerView: 1,
    spaceBetween: 13.9,
    loop: false,
    breakpoints: {
      0: {
        slidesPerView: 1,
        spaceBetween: 20
      },
      520: {
        slidesPerView: 2,
        spaceBetween: 20
      },
      1024: {
        slidesPerView: 3,
        spaceBetween: 24
      }
    },
    pagination: {
      el: ".swiper-pagination",
      type: "progressbar"
    },
    navigation: {
      prevEl: ".swiper-pagination__swiper-button-prev",
      nextEl: ".swiper-pagination__swiper-button-next"
    }
  });
}
function initTimelineSwiper() {
  if (!document.querySelectorAll(".timeline-slider__swiper").length) return;
  const timline_swiper = new Swiper(".timeline-slider__swiper", {
    // eslint-disable-line
    slidesPerView: 5,
    loop: false,
    breakpoints: {
      0: {
        slidesPerView: 1
      },
      501: {
        slidesPerView: 2
      },
      992: {
        slidesPerView: 3
      },
      1100: {
        slidesPerView: 4
      }
    },
    navigation: {
      prevEl: ".swiper-pagination__swiper-button-prev",
      nextEl: ".swiper-pagination__swiper-button-next"
    }
  });
}
function calcTimelineSwiperHeight() {
  const slides = document.querySelectorAll('.timeline-slider__slide');
  if (!slides.length) return;
  let maxHeight = 0;
  slides.forEach(function (slide) {
    const timestamp = slide.querySelector('.timeline-slider__timestamp');
    const content = slide.querySelector('.timeline-slider__content');
    if (!timestamp || !content) return;
    let timestampHeight = timestamp.offsetHeight;
    let contentHeight = content.offsetHeight;
    maxHeight = Math.max(maxHeight, timestampHeight, contentHeight);
  });
  slides.forEach(function (slide) {
    const timestamp = slide.querySelector('.timeline-slider__timestamp');
    const content = slide.querySelector('.timeline-slider__content');
    if (!timestamp || !content) return;
    timestamp.style.height = maxHeight + 'px';
    content.style.height = maxHeight + 'px';
  });
}
function timlineSwiperMobile() {
  let slides = document.querySelectorAll('.swiper-slide');
  if (!slides.length) return;
  if (window.matchMedia("(max-width: 501px)").matches) {
    slides.forEach(function (slide) {
      if (!slide.classList.contains('swiper-slide__initial')) {
        slide.classList.add('swiper-slide__initial');
        slide.classList.add('swiper-slide__initial--mobile');
      }
    });
  } else {
    slides.forEach(function (slide) {
      if (slide.classList.contains('swiper-slide__initial--mobile')) {
        slide.classList.remove('swiper-slide__initial');
        slide.classList.remove('swiper-slide__initial--mobile');
      }
    });
  }
}
(0, _utils.onReady)(() => {
  initContentSwiper();
  initTimelineSwiper();
  if (window.innerWidth > 501) {
    calcTimelineSwiperHeight();
  }
  timlineSwiperMobile();
  window.addEventListener('resize', (0, _utils.debounce)(timlineSwiperMobile, 200));
  window.addEventListener('resize', (0, _utils.debounce)(function () {
    if (window.matchMedia("(min-width: 768px) and (max-width: 992px)").matches || window.matchMedia("(min-width: 992px) and (max-width: 1366px)").matches || window.matchMedia("(min-width: 1366px)").matches) {
      calcTimelineSwiperHeight();
    }
  }, 200));
});

},{"../utils":5}],4:[function(require,module,exports){
"use strict";

(() => {
  require("./components/header.js");
  require("./components/swiper.js");
  require("./components/fetch-posts.js");
})();

},{"./components/fetch-posts.js":1,"./components/header.js":2,"./components/swiper.js":3}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.onReady = exports.debounce = void 0;
/**
 *
 * @param {Function} fn The user defined function to execute only upon successful DOM load
 */
const onReady = fn => {
  if (document.readyState !== "loading") {
    fn();
  } else {
    document.addEventListener("DOMContentLoaded", fn);
  }
};

/**
 * Execute a given function after a giving timeout period
 * @param {Function} fn The function to call
 * @param {number} timeout In miliseconds the amount of time to wait
 * @returns {Function}
 */
exports.onReady = onReady;
const debounce = (fn, timeout) => {
  let timeoutId;
  return function () {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    clearTimeout(timeoutId);
    timeoutId = setTimeout(() => fn.apply(this, args), timeout);
  };
};
exports.debounce = debounce;

},{}]},{},[1,2,3,4,5])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhc3NldHMvcHVibGljL3NyYy9qcy9jb21wb25lbnRzL2ZldGNoLXBvc3RzLmpzIiwiYXNzZXRzL3B1YmxpYy9zcmMvanMvY29tcG9uZW50cy9oZWFkZXIuanMiLCJhc3NldHMvcHVibGljL3NyYy9qcy9jb21wb25lbnRzL3N3aXBlci5qcyIsImFzc2V0cy9wdWJsaWMvc3JjL2pzL2RlZmF1bHQuanMiLCJhc3NldHMvcHVibGljL3NyYy9qcy91dGlscy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLFlBQVk7O0FBRVosSUFBQSxNQUFBLEdBQUEsT0FBQTtBQUVBLFNBQVMsV0FBVyxDQUFBLEVBQUc7RUFDckIsTUFBTSxXQUFXLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUM7RUFFekQsSUFBSSxXQUFXLEtBQUssSUFBSSxFQUFFO0lBQ3hCO0VBQ0Y7RUFFQSxJQUFJLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQztFQUVyRCxJQUFLLFNBQVMsRUFBRztJQUNmLElBQUksUUFBUSxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLFFBQVEsQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRTtNQUMzRyxXQUFXLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNO0lBQ3BDO0VBQ0YsQ0FBQyxNQUFNO0lBQ0wsSUFBSSxRQUFRLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksUUFBUSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFO01BQ3pHLFdBQVcsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLE1BQU07SUFDcEM7RUFDRjtFQUVBLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FB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RCxDQUFDO0FBQ0gsQ0FBQztBQUFDLE9BQUEsQ0FBQSxRQUFBLEdBQUEsUUFBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBvblJlYWR5IH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbmZ1bmN0aW9uIGZldGNoX3Bvc3RzKCkge1xuICBjb25zdCBsb2FkTW9yZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubG9hZC0tbW9yZVwiKTtcblxuICBpZiAobG9hZE1vcmVCdG4gPT09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBsZXQgcG9zdHNHcmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3N0cy1ncmlkXCIpO1xuXG4gIGlmICggcG9zdHNHcmlkICkge1xuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvc3RzLWdyaWRcIikuZGF0YXNldC5wYWdlID09IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9zdHMtZ3JpZFwiKS5kYXRhc2V0Lm1heCkge1xuICAgICAgbG9hZE1vcmVCdG4uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaXRlLW1haW5cIikuZGF0YXNldC5wYWdlID09IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2l0ZS1tYWluXCIpLmRhdGFzZXQubWF4KSB7XG4gICAgICBsb2FkTW9yZUJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfVxuICB9XG5cbiAgbG9hZE1vcmVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgbGV0IGN1cnJlbnRQYWdlID0gJyc7XG5cbiAgICBsZXQgcG9zdHNHcmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3N0cy1ncmlkXCIpO1xuXG4gICAgaWYgKCBwb3N0c0dyaWQgKSB7XG4gICAgICBjdXJyZW50UGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9zdHMtZ3JpZFwiKS5kYXRhc2V0LnBhZ2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN1cnJlbnRQYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaXRlLW1haW5cIikuZGF0YXNldC5wYWdlO1xuICAgIH1cbiAgICBcbiAgICBsZXQgbWF4UGFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpdGUtbWFpblwiKS5kYXRhc2V0Lm1heDtcbiAgICBsZXQgaXNTZWFyY2ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpdGUtbWFpblwiKS5kYXRhc2V0LnNlYXJjaCA9PT0gXCJpcy1zZWFyY2hcIjtcblxuICAgIGxldCBzZWFyY2hGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VhcmNoLWZvcm1fX3NlYXJjaC1maWVsZFwiKTtcblxuICAgIGxldCBzZWFyY2hRdWVyeSA9ICcnO1xuXG4gICAgaWYgKCBzZWFyY2hGaWVsZCApIHtcbiAgICAgIHNlYXJjaFF1ZXJ5ID0gc2VhcmNoRmllbGQudmFsdWU7XG4gICAgfVxuXG4gICAgbGV0IGlzQmxvY2sgPSBwb3N0c0dyaWQgPyBwb3N0c0dyaWQuZGF0YXNldC5ibG9jayA9PT0gXCJpcy1ibG9ja1wiIDogZmFsc2U7XG5cbiAgICBjb25zdCBwb3N0c0dyaWRXcmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInBvc3RzLWdyaWRfX3dyYXBwZXJcIilbMF07XG4gICAgY29uc3QgcG9zdHNHcmlkQnRuV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJwb3N0cy1ncmlkX19idG4td3JhcHBlclwiKVswXTtcblxuICAgIGNvbnN0IG1vcmVEYXRhID0gbmV3IEZvcm1EYXRhKCk7XG5cbiAgICBtb3JlRGF0YS5hcHBlbmQoXCJhY3Rpb25cIiwgXCJsb2FkX21vcmVfcG9zdHNcIik7XG4gICAgbW9yZURhdGEuYXBwZW5kKFwiY3VycmVudFBhZ2VcIiwgY3VycmVudFBhZ2UpO1xuICAgIG1vcmVEYXRhLmFwcGVuZChcInNlYXJjaFF1ZXJ5XCIsIHNlYXJjaFF1ZXJ5KTtcbiAgICBtb3JlRGF0YS5hcHBlbmQoJ19ub25jZScsIFdQX3ZhcnMubm9uY2UpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgICBjb25zdCBkYXRhQ2FsbCA9IGF3YWl0IGZldGNoKFdQX3ZhcnMuYWpheFVSTCwgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgYm9keTogbW9yZURhdGFcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7IC8vIFBhcnNlIHRoZSBKU09OIHJlc3BvbnNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1czogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5kYXRhKSB7XG4gICAgICAgICAgY29uc3QgaHRtbFN0cmluZyA9IGRhdGEuZGF0YVswXTsgLy8gRXh0cmFjdCB0aGUgSFRNTCBjb250ZW50IGZyb20gdGhlIHJlc3BvbnNlXG5cbiAgICAgICAgICBjb25zdCBtYXhQYWdlcyA9IGRhdGEuZGF0YVsxXTsgLy8gRXh0cmFjdCB0aGUgbWF4IHBhZ2VzIGZyb20gdGhlIHJlc3BvbnNlIGZvciBzZWFyY2hcbiAgICAgICAgICBjb25zb2xlLmxvZyhtYXhQYWdlcyk7XG5cbiAgICAgICAgICBwb3N0c0dyaWRCdG5XcmFwcGVyLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWJlZ2luXCIsIGh0bWxTdHJpbmcpO1xuXG4gICAgICAgICAgaWYgKCAhIGlzU2VhcmNoICYmICEgaXNCbG9jayApIHtcbiAgICAgICAgICAgIGxldCBnZXRVcmwgPSB3aW5kb3cubG9jYXRpb247XG4gICAgICAgICAgICBsZXQgYmFzZVVybCA9IGdldFVybC5wcm90b2NvbCArIFwiLy9cIiArIGdldFVybC5ob3N0ICsgXCIvXCIgKyBnZXRVcmwucGF0aG5hbWUuc3BsaXQoJy8nKVsxXTtcbiAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSgnJywgJycsIGJhc2VVcmwgKyAnL3BhZ2UvJyArIChwYXJzZUludChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpdGUtbWFpblwiKS5kYXRhc2V0LnBhZ2UpICsgMSkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2l0ZS1tYWluXCIpLmRhdGFzZXQucGFnZSsrO1xuXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2l0ZS1tYWluXCIpLmRhdGFzZXQucGFnZSA9PSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpdGUtbWFpblwiKS5kYXRhc2V0Lm1heCkge1xuICAgICAgICAgICAgbG9hZE1vcmVCdG4uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoIGlzQmxvY2sgKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvc3RzLWdyaWRcIikuZGF0YXNldC5wYWdlKys7XG5cbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvc3RzLWdyaWRcIikuZGF0YXNldC5wYWdlID09IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9zdHMtZ3JpZFwiKS5kYXRhc2V0Lm1heCkge1xuICAgICAgICAgICAgICBsb2FkTW9yZUJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCBpc1NlYXJjaCApIHtcbiAgICAgICAgICAgIGlmICggZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaXRlLW1haW5cIikuZGF0YXNldC5wYWdlID09IG1heFBhZ2VzICkge1xuICAgICAgICAgICAgICBsb2FkTW9yZUJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUud2FybignSW52YWxpZCBkYXRhIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlcicpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUud2FybihlcnIpKTtcbiAgfSk7XG59XG5cbm9uUmVhZHkoKCkgPT4ge1xuICBmZXRjaF9wb3N0cygpO1xufSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHsgb25SZWFkeSB9IGZyb20gXCIuLi91dGlsc1wiO1xuXG5mdW5jdGlvbiBzaG93TWVudSgpIHtcbiAgY29uc3QgbmF2aWdhdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFpbi1uYXZpZ2F0aW9uXCIpO1xuICBjb25zdCBtZW51SXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiI21haW4tbmF2aWdhdGlvbiBsaS5jaGlsZHJlbi16ZXJvLWxldmVsLm1lbnUtaXRlbS1oYXMtY2hpbGRyZW5cIik7XG4gIGNvbnN0IG1lbnVPdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcbiAgICBcInNpdGUtaGVhZGVyX19uYXYtb3ZlcmxheVwiXG4gIClbMF07XG4gIFxuXG4gIGlmIChuYXZpZ2F0aW9uID09PSBudWxsIHx8IG1lbnVJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBtZW51SXRlbXMuZm9yRWFjaCgobWVudUl0ZW0pID0+IHtcbiAgICBtZW51SXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCBmdW5jdGlvbigpIHtcbiAgICAgIG5hdmlnYXRpb24uY2xhc3NMaXN0LmFkZChcIm1lbnUtYWN0aXZlXCIpO1xuICAgICAgbWVudU92ZXJsYXkuY2xhc3NMaXN0LmFkZChcIm92ZXJsYXktYWN0aXZlXCIpO1xuICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgIH0pO1xuICBcbiAgICBtZW51SXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgIG5hdmlnYXRpb24uY2xhc3NMaXN0LnJlbW92ZShcIm1lbnUtYWN0aXZlXCIpO1xuICAgICAgbWVudU92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZShcIm92ZXJsYXktYWN0aXZlXCIpO1xuICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgIH0pO1xuICB9KTtcblxuICBcbiAgY29uc3Qgc3ViTWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdWItbWVudSBsaS5tZW51LWl0ZW0taGFzLWNoaWxkcmVuJyk7XG4gIFxuICBzdWJNZW51LmZvckVhY2goKG1lbnVJdGVtKSA9PiB7XG4gICAgbWVudUl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgfSk7XG4gIFxuICAgIG1lbnVJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgIH0pO1xuICB9KTtcblxufVxuXG5mdW5jdGlvbiBnZXRNYWluTmF2V2lkdGgoKSB7XG4gIGNvbnN0IG1haW5OYXZXaWR0aCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFpbk5hdldpZHRoXCIpO1xuICBjb25zdCBnZXRXaWR0aCA9IG1haW5OYXZXaWR0aC5vZmZzZXRXaWR0aDtcblxuICBpZiAoZ2V0V2lkdGggPT09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCItLW1haW5OYXZXaWR0aFwiLCBnZXRXaWR0aCArIFwicHhcIik7XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZUxhbmd1YWdlU3dpdGNoZXIoaWQsIG1lbnVDbGFzcykge1xuICBjb25zdCBib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXTtcbiAgY29uc3QgbGFuZ3VhZ2VJY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICBjb25zdCBsYW5nU3ViTWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUobWVudUNsYXNzKVswXTtcblxuICBpZiAoIWxhbmd1YWdlSWNvbikgcmV0dXJuO1xuXG4gIGxhbmd1YWdlSWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGxhbmdTdWJNZW51LmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xuICB9KTtcblxuICBib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgaWYgKCFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMobWVudUNsYXNzKSkgbGFuZ1N1Yk1lbnUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBsYW5ndWFnZVN3aXRjaGVyKCkge1xuICB0b2dnbGVMYW5ndWFnZVN3aXRjaGVyKFwibGFuZ3VhZ2VJY29uXCIsIFwibGFuZy1zdWItbWVudVwiKTtcbiAgdG9nZ2xlTGFuZ3VhZ2VTd2l0Y2hlcihcImxhbmd1YWdlSWNvbk1vYmlsZVwiLCBcImxhbmctc3ViLW1lbnUtbW9iaWxlXCIpO1xufVxuXG5mdW5jdGlvbiB0cmlnZ2VyU2VhcmNoQm94KCkge1xuICBjb25zdCBib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXTtcbiAgY29uc3QgdHJpZ2dlclNlYXJjaEJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidHJpZ2dlclNlYXJjaEJveFwiKTtcbiAgY29uc3QgdHJpZ2dlclNlYXJjaEJveE1vYmlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidHJpZ2dlclNlYXJjaEJveE1vYmlsZVwiKTtcbiAgY29uc3Qgc2VhcmNoUG9wdXAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2l0ZS1oZWFkZXJfX3NlYXJjaC1wb3B1cFwiKVswXTtcblxuICBpZiAodHJpZ2dlclNlYXJjaEJveCA9PT0gbnVsbCB8fCBzZWFyY2hQb3B1cCA9PT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZVNlYXJjaEJveENsaWNrKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgc2VhcmNoUG9wdXAuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcbiAgICBib2R5LmNsYXNzTGlzdC50b2dnbGUoXCJkaXNhYmxlLXNjcm9sbC1zZWFyY2hcIik7XG4gIH1cblxuICBpZiAodHJpZ2dlclNlYXJjaEJveCkge1xuICAgIHRyaWdnZXJTZWFyY2hCb3guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZVNlYXJjaEJveENsaWNrKTtcbiAgfVxuXG4gIGlmICh0cmlnZ2VyU2VhcmNoQm94TW9iaWxlKSB7XG4gICAgdHJpZ2dlclNlYXJjaEJveE1vYmlsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlU2VhcmNoQm94Q2xpY2spO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRyaWdnZXJNb2JpbGVNZW51KCkge1xuICBjb25zdCBib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXTtcbiAgY29uc3QgaGFtYnVyZ2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNpdGUtaGVhZGVyX19tb2JpbGUtd3JhcC0taGFtYnVyZ2VyXCIpWzBdO1xuICBjb25zdCBtb2JpbGVNb2JpbGVNZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm1vYmlsZS1tZW51XCIpWzBdO1xuXG4gIGlmIChoYW1idXJnZXIgPT09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBjaGlsZHJlblplcm9MZXZlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNtb2JpbGUtbWVudS1uYXZpZ2F0aW9uIGxpLmNoaWxkcmVuLXplcm8tbGV2ZWwubWVudS1pdGVtLWhhcy1jaGlsZHJlbicpO1xuICBjb25zdCBjaGlsZHJlbkZpcnN0TGV2ZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjbW9iaWxlLW1lbnUtbmF2aWdhdGlvbiBsaS5jaGlsZHJlbi1maXJzdC1sZXZlbC5tZW51LWl0ZW0taGFzLWNoaWxkcmVuJyk7XG4gIFxuICBjaGlsZHJlblplcm9MZXZlbC5mb3JFYWNoKCh6ZXJvSXRlbSkgPT4ge1xuICAgIGNvbnN0IHN1Yk1lbnVUb2dnbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgc3ViTWVudVRvZ2dsZS5jbGFzc0xpc3QuYWRkKCdzdWItbWVudS10b2dnbGUnKTtcbiAgICBcbiAgICBzdWJNZW51VG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICAgIHRoaXMucGFyZW50RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICB9KTtcbiAgICBcbiAgICB6ZXJvSXRlbS5hcHBlbmRDaGlsZChzdWJNZW51VG9nZ2xlKTtcbiAgfSk7XG5cbiAgY2hpbGRyZW5GaXJzdExldmVsLmZvckVhY2goKGZpcnN0TGV2ZWxJdGVtKSA9PiB7XG4gICAgY29uc3Qgc3ViTWVudVRvZ2dsZUZpcnN0TGV2ZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgc3ViTWVudVRvZ2dsZUZpcnN0TGV2ZWwuY2xhc3NMaXN0LmFkZCgnc3ViLW1lbnUtbGV2ZWwtdHdvLXRvZ2dsZScpO1xuICBcbiAgICBzdWJNZW51VG9nZ2xlRmlyc3RMZXZlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuY2xhc3NMaXN0LnRvZ2dsZSgnbWVudS1hY3RpdmUnKTtcbiAgICAgIHRoaXMucGFyZW50RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdtZW51LWFjdGl2ZScpO1xuICAgIH0pO1xuXG4gICAgZmlyc3RMZXZlbEl0ZW0uYXBwZW5kQ2hpbGQoc3ViTWVudVRvZ2dsZUZpcnN0TGV2ZWwpO1xuICB9KTtcblxuICBoYW1idXJnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuY2xhc3NMaXN0LnRvZ2dsZShcImhhbWJ1cmdlci0tYWN0aXZlXCIpO1xuICAgIG1vYmlsZU1vYmlsZU1lbnUuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcbiAgICBib2R5LmNsYXNzTGlzdC50b2dnbGUoXCJkaXNhYmxlLXNjcm9sbC1zZWFyY2hcIik7XG4gIH0pO1xufVxuXG5vblJlYWR5KCgpID0+IHtcbiAgc2hvd01lbnUoKTtcbiAgbGFuZ3VhZ2VTd2l0Y2hlcigpO1xuICB0cmlnZ2VyU2VhcmNoQm94KCk7XG4gIHRyaWdnZXJNb2JpbGVNZW51KCk7XG5cbiAgLy8gVE9ETzogUmVtb3ZlIHRoaXMgYWZ0ZXIgZml4aW5nIHRoZSBmb250IGxvYWRpbmcgaXNzdWUuXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGdldE1haW5OYXZXaWR0aCgpO1xuICB9LCAyMDAwKTtcbn0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IG9uUmVhZHksIGRlYm91bmNlIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbmZ1bmN0aW9uIGluaXRDb250ZW50U3dpcGVyKCkge1xuICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGVudC1zbGlkZXJfX3N3aXBlclwiKS5sZW5ndGgpIHJldHVybjtcblxuICBjb25zdCBjb250ZW50X3N3aXBlciA9IG5ldyBTd2lwZXIoXCIuY29udGVudC1zbGlkZXJfX3N3aXBlclwiLCB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICBzbGlkZXNQZXJWaWV3OiAxLFxuICAgIHNwYWNlQmV0d2VlbjogMTMuOSxcbiAgICBsb29wOiBmYWxzZSxcbiAgICBicmVha3BvaW50czoge1xuICAgICAgMDoge1xuICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxuICAgICAgICBzcGFjZUJldHdlZW46IDIwXG4gICAgICB9LFxuICAgICAgNTIwOiB7XG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXG4gICAgICAgIHNwYWNlQmV0d2VlbjogMjBcbiAgICAgIH0sXG4gICAgICAxMDI0OiB7XG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDMsXG4gICAgICAgIHNwYWNlQmV0d2VlbjogMjRcbiAgICAgIH1cbiAgICB9LFxuICAgIHBhZ2luYXRpb246IHtcbiAgICAgIGVsOiBcIi5zd2lwZXItcGFnaW5hdGlvblwiLFxuICAgICAgdHlwZTogXCJwcm9ncmVzc2JhclwiXG4gICAgfSxcbiAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICBwcmV2RWw6IFwiLnN3aXBlci1wYWdpbmF0aW9uX19zd2lwZXItYnV0dG9uLXByZXZcIixcbiAgICAgIG5leHRFbDogXCIuc3dpcGVyLXBhZ2luYXRpb25fX3N3aXBlci1idXR0b24tbmV4dFwiXG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gaW5pdFRpbWVsaW5lU3dpcGVyKCkge1xuICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGltZWxpbmUtc2xpZGVyX19zd2lwZXJcIikubGVuZ3RoKSByZXR1cm47XG5cbiAgY29uc3QgdGltbGluZV9zd2lwZXIgPSBuZXcgU3dpcGVyKFwiLnRpbWVsaW5lLXNsaWRlcl9fc3dpcGVyXCIsIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgIHNsaWRlc1BlclZpZXc6IDUsXG4gICAgbG9vcDogZmFsc2UsXG4gICAgYnJlYWtwb2ludHM6IHtcbiAgICAgIDA6IHtcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMVxuICAgICAgfSxcbiAgICAgIDUwMToge1xuICAgICAgICBzbGlkZXNQZXJWaWV3OiAyXG4gICAgICB9LFxuICAgICAgOTkyOiB7XG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDNcbiAgICAgIH0sXG4gICAgICAxMTAwOiB7XG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDRcbiAgICAgIH1cbiAgICB9LFxuICAgIG5hdmlnYXRpb246IHtcbiAgICAgIHByZXZFbDogXCIuc3dpcGVyLXBhZ2luYXRpb25fX3N3aXBlci1idXR0b24tcHJldlwiLFxuICAgICAgbmV4dEVsOiBcIi5zd2lwZXItcGFnaW5hdGlvbl9fc3dpcGVyLWJ1dHRvbi1uZXh0XCJcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjYWxjVGltZWxpbmVTd2lwZXJIZWlnaHQoKSB7XG4gIGNvbnN0IHNsaWRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50aW1lbGluZS1zbGlkZXJfX3NsaWRlJyk7XG5cbiAgaWYgKCFzbGlkZXMubGVuZ3RoKSByZXR1cm47XG5cbiAgbGV0IG1heEhlaWdodCA9IDA7XG5cbiAgc2xpZGVzLmZvckVhY2goZnVuY3Rpb24oIHNsaWRlICkge1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IHNsaWRlLnF1ZXJ5U2VsZWN0b3IoJy50aW1lbGluZS1zbGlkZXJfX3RpbWVzdGFtcCcpO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBzbGlkZS5xdWVyeVNlbGVjdG9yKCcudGltZWxpbmUtc2xpZGVyX19jb250ZW50Jyk7XG5cbiAgICBpZiAoIXRpbWVzdGFtcCB8fCAhY29udGVudCkgcmV0dXJuO1xuICAgIGxldCB0aW1lc3RhbXBIZWlnaHQgPSB0aW1lc3RhbXAub2Zmc2V0SGVpZ2h0O1xuICAgIGxldCBjb250ZW50SGVpZ2h0ID0gY29udGVudC5vZmZzZXRIZWlnaHQ7XG5cbiAgICBtYXhIZWlnaHQgPSBNYXRoLm1heChtYXhIZWlnaHQsIHRpbWVzdGFtcEhlaWdodCwgY29udGVudEhlaWdodCk7XG4gIH0pO1xuXG4gIHNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uKCBzbGlkZSApIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBzbGlkZS5xdWVyeVNlbGVjdG9yKCcudGltZWxpbmUtc2xpZGVyX190aW1lc3RhbXAnKTtcbiAgICBjb25zdCBjb250ZW50ID0gc2xpZGUucXVlcnlTZWxlY3RvcignLnRpbWVsaW5lLXNsaWRlcl9fY29udGVudCcpO1xuXG4gICAgaWYgKCF0aW1lc3RhbXAgfHwgIWNvbnRlbnQpIHJldHVybjtcbiAgICB0aW1lc3RhbXAuc3R5bGUuaGVpZ2h0ID0gbWF4SGVpZ2h0ICsgJ3B4JztcbiAgICBjb250ZW50LnN0eWxlLmhlaWdodCA9IG1heEhlaWdodCArICdweCc7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiB0aW1saW5lU3dpcGVyTW9iaWxlICgpIHtcblxuICBsZXQgc2xpZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnN3aXBlci1zbGlkZScpO1xuXG4gIGlmICghc2xpZGVzLmxlbmd0aCkgcmV0dXJuO1xuXG4gIGlmICh3aW5kb3cubWF0Y2hNZWRpYShcIihtYXgtd2lkdGg6IDUwMXB4KVwiKS5tYXRjaGVzKSB7XG5cbiAgICBzbGlkZXMuZm9yRWFjaChmdW5jdGlvbihzbGlkZSkge1xuICAgICAgaWYgKCFzbGlkZS5jbGFzc0xpc3QuY29udGFpbnMoJ3N3aXBlci1zbGlkZV9faW5pdGlhbCcpKSB7XG4gICAgICAgIHNsaWRlLmNsYXNzTGlzdC5hZGQoJ3N3aXBlci1zbGlkZV9faW5pdGlhbCcpO1xuICAgICAgICBzbGlkZS5jbGFzc0xpc3QuYWRkKCdzd2lwZXItc2xpZGVfX2luaXRpYWwtLW1vYmlsZScpO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uKHNsaWRlKSB7XG4gICAgICBpZiAoc2xpZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdzd2lwZXItc2xpZGVfX2luaXRpYWwtLW1vYmlsZScpKSB7XG4gICAgICAgIHNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoJ3N3aXBlci1zbGlkZV9faW5pdGlhbCcpO1xuICAgICAgICBzbGlkZS5jbGFzc0xpc3QucmVtb3ZlKCdzd2lwZXItc2xpZGVfX2luaXRpYWwtLW1vYmlsZScpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbm9uUmVhZHkoKCkgPT4ge1xuICBpbml0Q29udGVudFN3aXBlcigpO1xuICBpbml0VGltZWxpbmVTd2lwZXIoKTtcbiAgaWYod2luZG93LmlubmVyV2lkdGggPiA1MDEpIHtcbiAgICBjYWxjVGltZWxpbmVTd2lwZXJIZWlnaHQoKTtcbiAgfVxuICB0aW1saW5lU3dpcGVyTW9iaWxlKCk7XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGRlYm91bmNlKHRpbWxpbmVTd2lwZXJNb2JpbGUsIDIwMCkpO1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBkZWJvdW5jZShmdW5jdGlvbigpIHtcbiAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEoXCIobWluLXdpZHRoOiA3NjhweCkgYW5kIChtYXgtd2lkdGg6IDk5MnB4KVwiKS5tYXRjaGVzIHx8XG4gICAgICAgIHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1pbi13aWR0aDogOTkycHgpIGFuZCAobWF4LXdpZHRoOiAxMzY2cHgpXCIpLm1hdGNoZXMgfHxcbiAgICAgICAgd2luZG93Lm1hdGNoTWVkaWEoXCIobWluLXdpZHRoOiAxMzY2cHgpXCIpLm1hdGNoZXMpIHtcbiAgICAgIGNhbGNUaW1lbGluZVN3aXBlckhlaWdodCgpO1xuICAgIH1cbiAgfSwgMjAwKSk7XG59KTtcbiIsIigoKSA9PiB7XG4gIHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvaGVhZGVyLmpzXCIpO1xuICByZXF1aXJlKFwiLi9jb21wb25lbnRzL3N3aXBlci5qc1wiKTtcbiAgcmVxdWlyZShcIi4vY29tcG9uZW50cy9mZXRjaC1wb3N0cy5qc1wiKTtcbn0pKCk7IiwiLyoqXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIHVzZXIgZGVmaW5lZCBmdW5jdGlvbiB0byBleGVjdXRlIG9ubHkgdXBvbiBzdWNjZXNzZnVsIERPTSBsb2FkXG4gKi9cbmV4cG9ydCBjb25zdCBvblJlYWR5ID0gKGZuKSA9PiB7XG4gIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9PSBcImxvYWRpbmdcIikge1xuICAgIGZuKCk7XG4gIH0gZWxzZSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZm4pO1xuICB9XG59O1xuXG4vKipcbiAqIEV4ZWN1dGUgYSBnaXZlbiBmdW5jdGlvbiBhZnRlciBhIGdpdmluZyB0aW1lb3V0IHBlcmlvZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGNhbGxcbiAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lb3V0IEluIG1pbGlzZWNvbmRzIHRoZSBhbW91bnQgb2YgdGltZSB0byB3YWl0XG4gKiBAcmV0dXJucyB7RnVuY3Rpb259XG4gKi9cbmV4cG9ydCBjb25zdCBkZWJvdW5jZSA9IChmbiwgdGltZW91dCkgPT4ge1xuICBsZXQgdGltZW91dElkO1xuXG4gIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gZm4uYXBwbHkodGhpcywgYXJncyksIHRpbWVvdXQpO1xuICB9O1xufTsiXX0=
