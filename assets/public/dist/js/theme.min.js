(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

var _utils = require("../utils");
function fetch_posts() {
  const loadMoreBtn = document.querySelector(".load--more");
  if (loadMoreBtn === null) {
    return;
  }
  let postsGrid = document.querySelector(".posts-grid");
  if (postsGrid) {
    if (document.querySelector(".posts-grid").dataset.page == document.querySelector(".posts-grid").dataset.max) {
      loadMoreBtn.style.display = "none";
    }
  } else {
    if (document.querySelector(".site-main").dataset.page == document.querySelector(".site-main").dataset.max) {
      loadMoreBtn.style.display = "none";
    }
  }
  loadMoreBtn.addEventListener("click", async e => {
    e.preventDefault();
    let currentPage = '';
    let postsGrid = document.querySelector(".posts-grid");
    if (postsGrid) {
      currentPage = document.querySelector(".posts-grid").dataset.page;
    } else {
      currentPage = document.querySelector(".site-main").dataset.page;
    }
    let postType = '';
    let numberOfPosts = '';
    if (postsGrid) {
      postType = document.querySelector(".posts-grid").dataset.post;
      numberOfPosts = document.querySelector(".posts-grid").dataset.number;
    }
    let maxPages = document.querySelector(".site-main").dataset.max;
    let isSearch = document.querySelector(".site-main").dataset.search === "is-search";
    let searchField = document.querySelector(".search-form__search-field");
    let searchQuery = '';
    if (searchField) {
      searchQuery = searchField.value;
    }
    let isBlock = postsGrid ? postsGrid.dataset.block === "is-block" : false;
    const postsGridWrapper = document.getElementsByClassName("posts-grid__wrapper")[0];
    const postsGridBtnWrapper = document.getElementsByClassName("posts-grid__btn-wrapper")[0];
    const moreData = new FormData();
    moreData.append("action", "load_more_posts");
    moreData.append("currentPage", currentPage);
    moreData.append("searchQuery", searchQuery);
    moreData.append("postType", postType);
    moreData.append("numberOfPosts", numberOfPosts);
    moreData.append('_nonce', WP_vars.nonce); // eslint-disable-line

    const dataCall = await fetch(WP_vars.ajaxURL, {
      // eslint-disable-line
      method: "POST",
      body: moreData
    }).then(res => {
      if (res.ok) {
        return res.json(); // Parse the JSON response
      } else {
        throw new Error(`Request failed with status: ${res.status}`);
      }
    }).then(data => {
      if (data && data.data) {
        const htmlString = data.data[0]; // Extract the HTML content from the response

        // const maxPages = data.data[1]; // Extract the max pages from the response for search

        postsGridBtnWrapper.insertAdjacentHTML("beforebegin", htmlString);
        if (!isSearch && !isBlock) {
          let getUrl = window.location;
          let baseUrl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split('/')[1];
          window.history.pushState('', '', baseUrl + '/page/' + (parseInt(document.querySelector(".site-main").dataset.page) + 1));
        }
        document.querySelector(".site-main").dataset.page++;
        if (document.querySelector(".site-main").dataset.page == document.querySelector(".site-main").dataset.max) {
          loadMoreBtn.style.display = "none";
        }
        if (isBlock) {
          document.querySelector(".posts-grid").dataset.page++;
          if (document.querySelector(".posts-grid").dataset.page == document.querySelector(".posts-grid").dataset.max) {
            loadMoreBtn.style.display = "none";
          }
        }

        // if ( isSearch ) {
        //   if ( document.querySelector(".site-main").dataset.page == maxPages ) {
        //     loadMoreBtn.style.display = "none";
        //   }
        // }
      } else {
        console.warn('Invalid data received from the server');
      }
    }).catch(err => console.warn(err));
  });
}
(0, _utils.onReady)(() => {
  fetch_posts();
});

},{"../utils":5}],2:[function(require,module,exports){
"use strict";

var _utils = require("../utils");
function showMenu() {
  const navigation = document.getElementById("main-navigation");
  const menuItems = document.querySelectorAll("#main-navigation li.children-zero-level.menu-item-has-children");
  const menuOverlay = document.getElementsByClassName("site-header__nav-overlay")[0];
  if (navigation === null || menuItems.length === 0) {
    return;
  }
  menuItems.forEach(menuItem => {
    menuItem.addEventListener("mouseenter", function () {
      navigation.classList.add("menu-active");
      menuOverlay.classList.add("overlay-active");
      this.classList.add("active");
    });
    menuItem.addEventListener("mouseleave", function () {
      navigation.classList.remove("menu-active");
      menuOverlay.classList.remove("overlay-active");
      this.classList.remove("active");
    });
  });
  const subMenu = document.querySelectorAll('.sub-menu li.menu-item-has-children');
  subMenu.forEach(menuItem => {
    menuItem.addEventListener("mouseenter", function () {
      this.classList.add("active");
    });
    menuItem.addEventListener("mouseleave", function () {
      this.classList.remove("active");
    });
  });
}
function getMainNavWidth() {
  const mainNavWidth = document.getElementById("mainNavWidth");
  const getWidth = mainNavWidth.offsetWidth;
  if (getWidth === null) {
    return;
  }
  document.documentElement.style.setProperty("--mainNavWidth", getWidth + "px");
}
function toggleLanguageSwitcher(id, menuClass) {
  const body = document.getElementsByTagName('body')[0];
  const languageIcon = document.getElementById(id);
  const langSubMenu = document.getElementsByClassName(menuClass)[0];
  if (!languageIcon) return;
  languageIcon.addEventListener('click', e => {
    e.preventDefault();
    e.stopPropagation();
    langSubMenu.classList.toggle('active');
  });
  body.addEventListener('click', e => {
    if (!e.target.classList.contains(menuClass)) langSubMenu.classList.remove('active');
  });
}
function languageSwitcher() {
  toggleLanguageSwitcher("languageIcon", "lang-sub-menu");
  toggleLanguageSwitcher("languageIconMobile", "lang-sub-menu-mobile");
}
function triggerSearchBox() {
  const body = document.getElementsByTagName('body')[0];
  const triggerSearchBox = document.getElementById("triggerSearchBox");
  const triggerSearchBoxMobile = document.getElementById("triggerSearchBoxMobile");
  const searchPopup = document.getElementsByClassName("site-header__search-popup")[0];
  if (triggerSearchBox === null || searchPopup === null) {
    return;
  }
  function handleSearchBoxClick(e) {
    e.preventDefault();
    searchPopup.classList.toggle("active");
    body.classList.toggle("disable-scroll-search");
  }
  if (triggerSearchBox) {
    triggerSearchBox.addEventListener("click", handleSearchBoxClick);
  }
  if (triggerSearchBoxMobile) {
    triggerSearchBoxMobile.addEventListener("click", handleSearchBoxClick);
  }
}
function triggerMobileMenu() {
  const body = document.getElementsByTagName('body')[0];
  const hamburger = document.getElementsByClassName("site-header__mobile-wrap--hamburger")[0];
  const mobileMobileMenu = document.getElementsByClassName("mobile-menu")[0];
  if (hamburger === null) {
    return;
  }
  const childrenZeroLevel = document.querySelectorAll('#mobile-menu-navigation li.children-zero-level.menu-item-has-children');
  const childrenFirstLevel = document.querySelectorAll('#mobile-menu-navigation li.children-first-level.menu-item-has-children');
  childrenZeroLevel.forEach(zeroItem => {
    const subMenuToggle = document.createElement('span');
    subMenuToggle.classList.add('sub-menu-toggle');
    subMenuToggle.addEventListener('click', function () {
      this.classList.toggle('active');
      this.parentElement.classList.toggle('active');
    });
    zeroItem.appendChild(subMenuToggle);
  });
  childrenFirstLevel.forEach(firstLevelItem => {
    const subMenuToggleFirstLevel = document.createElement('span');
    subMenuToggleFirstLevel.classList.add('sub-menu-level-two-toggle');
    subMenuToggleFirstLevel.addEventListener('click', function () {
      this.classList.toggle('menu-active');
      this.parentElement.classList.toggle('menu-active');
    });
    firstLevelItem.appendChild(subMenuToggleFirstLevel);
  });
  hamburger.addEventListener("click", function () {
    this.classList.toggle("hamburger--active");
    mobileMobileMenu.classList.toggle("active");
    body.classList.toggle("disable-scroll-search");
  });
}
(0, _utils.onReady)(() => {
  showMenu();
  languageSwitcher();
  triggerSearchBox();
  triggerMobileMenu();
  setTimeout(() => {
    getMainNavWidth();
  }, 2000);
});

},{"../utils":5}],3:[function(require,module,exports){
"use strict";

var _utils = require("../utils");
function initContentSwiper() {
  if (!document.querySelectorAll(".content-slider__swiper").length) return;
  const content_swiper = new Swiper(".content-slider__swiper", {
    // eslint-disable-line
    slidesPerView: 1,
    spaceBetween: 13.9,
    loop: false,
    breakpoints: {
      0: {
        slidesPerView: 1,
        spaceBetween: 20
      },
      520: {
        slidesPerView: 2,
        spaceBetween: 20
      },
      1024: {
        slidesPerView: 3,
        spaceBetween: 24
      }
    },
    pagination: {
      el: ".swiper-pagination",
      type: "progressbar"
    },
    navigation: {
      prevEl: ".swiper-pagination__swiper-button-prev",
      nextEl: ".swiper-pagination__swiper-button-next"
    }
  });
}
function initTimelineSwiper() {
  if (!document.querySelectorAll(".timeline-slider__swiper").length) return;
  const timline_swiper = new Swiper(".timeline-slider__swiper", {
    // eslint-disable-line
    slidesPerView: 5,
    loop: false,
    breakpoints: {
      0: {
        slidesPerView: 1
      },
      501: {
        slidesPerView: 2
      },
      992: {
        slidesPerView: 3
      },
      1100: {
        slidesPerView: 4
      }
    },
    navigation: {
      prevEl: ".swiper-pagination__swiper-button-prev",
      nextEl: ".swiper-pagination__swiper-button-next"
    }
  });
}
function calcTimelineSwiperHeight() {
  const slides = document.querySelectorAll('.timeline-slider__slide');
  if (!slides.length) return;
  let maxHeight = 0;
  slides.forEach(function (slide) {
    const timestamp = slide.querySelector('.timeline-slider__timestamp');
    const content = slide.querySelector('.timeline-slider__content');
    if (!timestamp || !content) return;
    let timestampHeight = timestamp.offsetHeight;
    let contentHeight = content.offsetHeight;
    maxHeight = Math.max(maxHeight, timestampHeight, contentHeight);
  });
  slides.forEach(function (slide) {
    const timestamp = slide.querySelector('.timeline-slider__timestamp');
    const content = slide.querySelector('.timeline-slider__content');
    if (!timestamp || !content) return;
    timestamp.style.height = maxHeight + 'px';
    content.style.height = maxHeight + 'px';
  });
}
function timlineSwiperMobile() {
  let slides = document.querySelectorAll('.timeline-slider__slide');
  if (!slides.length) return;
  if (window.matchMedia("(max-width: 501px)").matches) {
    slides.forEach(function (slide) {
      if (!slide.classList.contains('swiper-slide__initial')) {
        slide.classList.add('swiper-slide__initial');
        slide.classList.add('swiper-slide__initial--mobile');
      }
    });
  } else {
    slides.forEach(function (slide) {
      if (slide.classList.contains('swiper-slide__initial--mobile')) {
        slide.classList.remove('swiper-slide__initial');
        slide.classList.remove('swiper-slide__initial--mobile');
      }
    });
  }
}
let profiles_swiper; // Declare the variable outside the functions so we can access it inside all functions

function initMobileProfiles() {
  if (!document.querySelectorAll(".block-profiles__swiper").length) return;
  profiles_swiper = new Swiper(".block-profiles__swiper", {
    // eslint-disable-line
    slidesPerView: 1,
    loop: false,
    breakpoints: {
      0: {
        slidesPerView: 1
      },
      768: {
        slidesPerView: 2,
        spaceBetween: 30
      },
      992: {
        slidesPerView: 2,
        spaceBetween: 30
      }
    },
    navigation: {
      prevEl: ".swiper-pagination__swiper-button-prev",
      nextEl: ".swiper-pagination__swiper-button-next"
    }
  });
}
function destroyMobileProfiles() {
  if (profiles_swiper !== undefined && profiles_swiper !== null) {
    profiles_swiper.destroy(true, true);
    profiles_swiper = null; // Reset the variable
  }
}

function calcOffsetElementHeight() {
  const offsetElements = document.querySelectorAll('.offset-element');
  const offsetElementContents = document.querySelectorAll('.block-profiles__swiper--wrapper--content');
  if (!offsetElements.length || !offsetElementContents.length) return;
  offsetElements.forEach(function (offsetElement, index) {
    const offsetElementHeight = offsetElement.offsetHeight;

    // Use the index of the current offsetElement to access the corresponding offsetElementContent
    const offsetElementContent = offsetElementContents[index];
    if (!offsetElementContent) return;
    offsetElementContent.style.bottom = -offsetElementHeight + 'px';
  });
}
(0, _utils.onReady)(() => {
  initContentSwiper();
  initTimelineSwiper();
  if (window.innerWidth > 501) {
    calcTimelineSwiperHeight();
  }
  timlineSwiperMobile();
  window.addEventListener('resize', (0, _utils.debounce)(timlineSwiperMobile, 200));
  window.addEventListener('resize', (0, _utils.debounce)(function () {
    if (window.matchMedia("(min-width: 768px) and (max-width: 992px)").matches || window.matchMedia("(min-width: 992px) and (max-width: 1366px)").matches || window.matchMedia("(min-width: 1366px)").matches) {
      calcTimelineSwiperHeight();
    }
  }, 200));
  window.addEventListener('resize', (0, _utils.debounce)(function () {
    if (window.innerWidth < 1024) {
      initMobileProfiles();
    } else {
      destroyMobileProfiles();
    }
  }, 200));
  if (window.innerWidth < 1024) {
    initMobileProfiles();
  } else {
    destroyMobileProfiles();
  }
  calcOffsetElementHeight();
});

},{"../utils":5}],4:[function(require,module,exports){
"use strict";

(() => {
  require("./components/header.js");
  require("./components/swiper.js");
  require("./components/fetch-posts.js");
})();

},{"./components/fetch-posts.js":1,"./components/header.js":2,"./components/swiper.js":3}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.onReady = exports.debounce = void 0;
/**
 *
 * @param {Function} fn The user defined function to execute only upon successful DOM load
 */
const onReady = fn => {
  if (document.readyState !== "loading") {
    fn();
  } else {
    document.addEventListener("DOMContentLoaded", fn);
  }
};

/**
 * Execute a given function after a giving timeout period
 * @param {Function} fn The function to call
 * @param {number} timeout In miliseconds the amount of time to wait
 * @returns {Function}
 */
exports.onReady = onReady;
const debounce = (fn, timeout) => {
  let timeoutId;
  return function () {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    clearTimeout(timeoutId);
    timeoutId = setTimeout(() => fn.apply(this, args), timeout);
  };
};
exports.debounce = debounce;

},{}]},{},[1,2,3,4,5])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhc3NldHMvcHVibGljL3NyYy9qcy9jb21wb25lbnRzL2ZldGNoLXBvc3RzLmpzIiwiYXNzZXRzL3B1YmxpYy9zcmMvanMvY29tcG9uZW50cy9oZWFkZXIuanMiLCJhc3NldHMvcHVibGljL3NyYy9qcy9jb21wb25lbnRzL3N3aXBlci5qcyIsImFzc2V0cy9wdWJsaWMvc3JjL2pzL2RlZmF1bHQuanMiLCJhc3NldHMvcHVibGljL3NyYy9qcy91dGlscy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLFlBQVk7O0FBRVosSUFBQSxNQUFBLEdBQUEsT0FBQTtBQUVBLFNBQVMsV0FBVyxDQUFBLEVBQUc7RUFDckIsTUFBTSxXQUFXLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUM7RUFFekQsSUFBSSxXQUFXLEtBQUssSUFBSSxFQUFFO0lBQ3hCO0VBQ0Y7RUFFQSxJQUFJLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQztFQUVyRCxJQUFLLFNBQVMsRUFBRztJQUNmLElBQUksUUFBUSxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLFFBQVEsQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRTtNQUMzRyxXQUFXLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNO0lBQ3BDO0VBQ0YsQ0FBQyxNQUFNO0lBQ0wsSUFBSSxRQUFRLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksUUFBUSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFO01BQ3pHLFdBQVcsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLE1BQU07SUFDcEM7RUFDRjtFQUVBLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FB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Ozs7O0FDSko7QUFDQTtBQUNBO0FBQ0E7QUFDTyxNQUFNLE9BQU8sR0FBSSxFQUFFLElBQUs7RUFDN0IsSUFBSSxRQUFRLENBQUMsVUFBVSxLQUFLLFNBQVMsRUFBRTtJQUNyQyxFQUFFLENBQUMsQ0FBQztFQUNOLENBQUMsTUFBTTtJQUNMLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsRUFBRSxFQUFFLENBQUM7RUFDbkQ7QUFDRixDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBLE9BQUEsQ0FBQSxPQUFBLEdBQUEsT0FBQTtBQU1PLE1BQU0sUUFBUSxHQUFHLENBQUMsRUFBRSxFQUFFLE9BQU8sS0FBSztFQUN2QyxJQUFJLFNBQVM7RUFFYixPQUFPLFlBQW1CO0lBQUEsU0FBQSxJQUFBLEdBQUEsU0FBQSxDQUFBLE1BQUEsRUFBTixJQUFJLE9BQUEsS0FBQSxDQUFBLElBQUEsR0FBQSxJQUFBLE1BQUEsSUFBQSxHQUFBLElBQUEsRUFBQSxJQUFBO01BQUosSUFBSSxDQUFBLElBQUEsSUFBQSxTQUFBLENBQUEsSUFBQTtJQUFBO0lBQ3RCLFlBQVksQ0FBQyxTQUFTLENBQUM7SUFDdkIsU0FBUyxHQUFHLFVBQVUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLE9BQU8sQ0FBQztFQUM3RCxDQUFDO0FBQ0gsQ0FBQztBQUFDLE9BQUEsQ0FBQSxRQUFBLEdBQUEsUUFBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBvblJlYWR5IH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbmZ1bmN0aW9uIGZldGNoX3Bvc3RzKCkge1xuICBjb25zdCBsb2FkTW9yZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubG9hZC0tbW9yZVwiKTtcblxuICBpZiAobG9hZE1vcmVCdG4gPT09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBsZXQgcG9zdHNHcmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3N0cy1ncmlkXCIpO1xuXG4gIGlmICggcG9zdHNHcmlkICkge1xuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvc3RzLWdyaWRcIikuZGF0YXNldC5wYWdlID09IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9zdHMtZ3JpZFwiKS5kYXRhc2V0Lm1heCkge1xuICAgICAgbG9hZE1vcmVCdG4uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaXRlLW1haW5cIikuZGF0YXNldC5wYWdlID09IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2l0ZS1tYWluXCIpLmRhdGFzZXQubWF4KSB7XG4gICAgICBsb2FkTW9yZUJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfVxuICB9XG5cbiAgbG9hZE1vcmVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgbGV0IGN1cnJlbnRQYWdlID0gJyc7XG5cbiAgICBsZXQgcG9zdHNHcmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3N0cy1ncmlkXCIpO1xuXG4gICAgaWYgKCBwb3N0c0dyaWQgKSB7XG4gICAgICBjdXJyZW50UGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9zdHMtZ3JpZFwiKS5kYXRhc2V0LnBhZ2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN1cnJlbnRQYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaXRlLW1haW5cIikuZGF0YXNldC5wYWdlO1xuICAgIH1cblxuICAgIGxldCBwb3N0VHlwZSA9ICcnO1xuICAgIGxldCBudW1iZXJPZlBvc3RzID0gJyc7XG5cbiAgICBpZiAoIHBvc3RzR3JpZCApIHtcbiAgICAgIHBvc3RUeXBlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3N0cy1ncmlkXCIpLmRhdGFzZXQucG9zdDtcbiAgICAgIG51bWJlck9mUG9zdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvc3RzLWdyaWRcIikuZGF0YXNldC5udW1iZXI7XG4gICAgfVxuICAgIFxuICAgIGxldCBtYXhQYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2l0ZS1tYWluXCIpLmRhdGFzZXQubWF4O1xuICAgIGxldCBpc1NlYXJjaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2l0ZS1tYWluXCIpLmRhdGFzZXQuc2VhcmNoID09PSBcImlzLXNlYXJjaFwiO1xuXG4gICAgbGV0IHNlYXJjaEZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWFyY2gtZm9ybV9fc2VhcmNoLWZpZWxkXCIpO1xuXG4gICAgbGV0IHNlYXJjaFF1ZXJ5ID0gJyc7XG5cbiAgICBpZiAoIHNlYXJjaEZpZWxkICkge1xuICAgICAgc2VhcmNoUXVlcnkgPSBzZWFyY2hGaWVsZC52YWx1ZTtcbiAgICB9XG5cbiAgICBsZXQgaXNCbG9jayA9IHBvc3RzR3JpZCA/IHBvc3RzR3JpZC5kYXRhc2V0LmJsb2NrID09PSBcImlzLWJsb2NrXCIgOiBmYWxzZTtcblxuICAgIGNvbnN0IHBvc3RzR3JpZFdyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwicG9zdHMtZ3JpZF9fd3JhcHBlclwiKVswXTtcbiAgICBjb25zdCBwb3N0c0dyaWRCdG5XcmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInBvc3RzLWdyaWRfX2J0bi13cmFwcGVyXCIpWzBdO1xuXG4gICAgY29uc3QgbW9yZURhdGEgPSBuZXcgRm9ybURhdGEoKTtcblxuICAgIG1vcmVEYXRhLmFwcGVuZChcImFjdGlvblwiLCBcImxvYWRfbW9yZV9wb3N0c1wiKTtcbiAgICBtb3JlRGF0YS5hcHBlbmQoXCJjdXJyZW50UGFnZVwiLCBjdXJyZW50UGFnZSk7XG4gICAgbW9yZURhdGEuYXBwZW5kKFwic2VhcmNoUXVlcnlcIiwgc2VhcmNoUXVlcnkpO1xuICAgIG1vcmVEYXRhLmFwcGVuZChcInBvc3RUeXBlXCIsIHBvc3RUeXBlKTtcbiAgICBtb3JlRGF0YS5hcHBlbmQoXCJudW1iZXJPZlBvc3RzXCIsIG51bWJlck9mUG9zdHMpO1xuICAgIG1vcmVEYXRhLmFwcGVuZCgnX25vbmNlJywgV1BfdmFycy5ub25jZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICAgIGNvbnN0IGRhdGFDYWxsID0gYXdhaXQgZmV0Y2goV1BfdmFycy5hamF4VVJMLCB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBib2R5OiBtb3JlRGF0YVxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTsgLy8gUGFyc2UgdGhlIEpTT04gcmVzcG9uc2VcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmRhdGEpIHtcbiAgICAgICAgICBjb25zdCBodG1sU3RyaW5nID0gZGF0YS5kYXRhWzBdOyAvLyBFeHRyYWN0IHRoZSBIVE1MIGNvbnRlbnQgZnJvbSB0aGUgcmVzcG9uc2VcblxuICAgICAgICAgIC8vIGNvbnN0IG1heFBhZ2VzID0gZGF0YS5kYXRhWzFdOyAvLyBFeHRyYWN0IHRoZSBtYXggcGFnZXMgZnJvbSB0aGUgcmVzcG9uc2UgZm9yIHNlYXJjaFxuXG4gICAgICAgICAgcG9zdHNHcmlkQnRuV3JhcHBlci5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmViZWdpblwiLCBodG1sU3RyaW5nKTtcblxuICAgICAgICAgIGlmICggISBpc1NlYXJjaCAmJiAhIGlzQmxvY2sgKSB7XG4gICAgICAgICAgICBsZXQgZ2V0VXJsID0gd2luZG93LmxvY2F0aW9uO1xuICAgICAgICAgICAgbGV0IGJhc2VVcmwgPSBnZXRVcmwucHJvdG9jb2wgKyBcIi8vXCIgKyBnZXRVcmwuaG9zdCArIFwiL1wiICsgZ2V0VXJsLnBhdGhuYW1lLnNwbGl0KCcvJylbMV07XG4gICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoJycsICcnLCBiYXNlVXJsICsgJy9wYWdlLycgKyAocGFyc2VJbnQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaXRlLW1haW5cIikuZGF0YXNldC5wYWdlKSArIDEpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpdGUtbWFpblwiKS5kYXRhc2V0LnBhZ2UrKztcblxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpdGUtbWFpblwiKS5kYXRhc2V0LnBhZ2UgPT0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaXRlLW1haW5cIikuZGF0YXNldC5tYXgpIHtcbiAgICAgICAgICAgIGxvYWRNb3JlQnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCBpc0Jsb2NrICkge1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3N0cy1ncmlkXCIpLmRhdGFzZXQucGFnZSsrO1xuXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3N0cy1ncmlkXCIpLmRhdGFzZXQucGFnZSA9PSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvc3RzLWdyaWRcIikuZGF0YXNldC5tYXgpIHtcbiAgICAgICAgICAgICAgbG9hZE1vcmVCdG4uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGlmICggaXNTZWFyY2ggKSB7XG4gICAgICAgICAgLy8gICBpZiAoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2l0ZS1tYWluXCIpLmRhdGFzZXQucGFnZSA9PSBtYXhQYWdlcyApIHtcbiAgICAgICAgICAvLyAgICAgbG9hZE1vcmVCdG4uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgIC8vICAgfVxuICAgICAgICAgIC8vIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0ludmFsaWQgZGF0YSByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXInKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLndhcm4oZXJyKSk7XG4gIH0pO1xufVxuXG5vblJlYWR5KCgpID0+IHtcbiAgZmV0Y2hfcG9zdHMoKTtcbn0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IG9uUmVhZHkgfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuZnVuY3Rpb24gc2hvd01lbnUoKSB7XG4gIGNvbnN0IG5hdmlnYXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1haW4tbmF2aWdhdGlvblwiKTtcbiAgY29uc3QgbWVudUl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIiNtYWluLW5hdmlnYXRpb24gbGkuY2hpbGRyZW4temVyby1sZXZlbC5tZW51LWl0ZW0taGFzLWNoaWxkcmVuXCIpO1xuICBjb25zdCBtZW51T3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXG4gICAgXCJzaXRlLWhlYWRlcl9fbmF2LW92ZXJsYXlcIlxuICApWzBdO1xuICBcblxuICBpZiAobmF2aWdhdGlvbiA9PT0gbnVsbCB8fCBtZW51SXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbWVudUl0ZW1zLmZvckVhY2goKG1lbnVJdGVtKSA9PiB7XG4gICAgbWVudUl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBuYXZpZ2F0aW9uLmNsYXNzTGlzdC5hZGQoXCJtZW51LWFjdGl2ZVwiKTtcbiAgICAgIG1lbnVPdmVybGF5LmNsYXNzTGlzdC5hZGQoXCJvdmVybGF5LWFjdGl2ZVwiKTtcbiAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICB9KTtcbiAgXG4gICAgbWVudUl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBuYXZpZ2F0aW9uLmNsYXNzTGlzdC5yZW1vdmUoXCJtZW51LWFjdGl2ZVwiKTtcbiAgICAgIG1lbnVPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoXCJvdmVybGF5LWFjdGl2ZVwiKTtcbiAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgXG4gIGNvbnN0IHN1Yk1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3ViLW1lbnUgbGkubWVudS1pdGVtLWhhcy1jaGlsZHJlbicpO1xuICBcbiAgc3ViTWVudS5mb3JFYWNoKChtZW51SXRlbSkgPT4ge1xuICAgIG1lbnVJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgIH0pO1xuICBcbiAgICBtZW51SXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICB9KTtcbiAgfSk7XG5cbn1cblxuZnVuY3Rpb24gZ2V0TWFpbk5hdldpZHRoKCkge1xuICBjb25zdCBtYWluTmF2V2lkdGggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1haW5OYXZXaWR0aFwiKTtcbiAgY29uc3QgZ2V0V2lkdGggPSBtYWluTmF2V2lkdGgub2Zmc2V0V2lkdGg7XG5cbiAgaWYgKGdldFdpZHRoID09PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwiLS1tYWluTmF2V2lkdGhcIiwgZ2V0V2lkdGggKyBcInB4XCIpO1xufVxuXG5mdW5jdGlvbiB0b2dnbGVMYW5ndWFnZVN3aXRjaGVyKGlkLCBtZW51Q2xhc3MpIHtcbiAgY29uc3QgYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF07XG4gIGNvbnN0IGxhbmd1YWdlSWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgY29uc3QgbGFuZ1N1Yk1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKG1lbnVDbGFzcylbMF07XG5cbiAgaWYgKCFsYW5ndWFnZUljb24pIHJldHVybjtcblxuICBsYW5ndWFnZUljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBsYW5nU3ViTWVudS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgfSk7XG5cbiAgYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGlmICghZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKG1lbnVDbGFzcykpIGxhbmdTdWJNZW51LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gbGFuZ3VhZ2VTd2l0Y2hlcigpIHtcbiAgdG9nZ2xlTGFuZ3VhZ2VTd2l0Y2hlcihcImxhbmd1YWdlSWNvblwiLCBcImxhbmctc3ViLW1lbnVcIik7XG4gIHRvZ2dsZUxhbmd1YWdlU3dpdGNoZXIoXCJsYW5ndWFnZUljb25Nb2JpbGVcIiwgXCJsYW5nLXN1Yi1tZW51LW1vYmlsZVwiKTtcbn1cblxuZnVuY3Rpb24gdHJpZ2dlclNlYXJjaEJveCgpIHtcbiAgY29uc3QgYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF07XG4gIGNvbnN0IHRyaWdnZXJTZWFyY2hCb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRyaWdnZXJTZWFyY2hCb3hcIik7XG4gIGNvbnN0IHRyaWdnZXJTZWFyY2hCb3hNb2JpbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRyaWdnZXJTZWFyY2hCb3hNb2JpbGVcIik7XG4gIGNvbnN0IHNlYXJjaFBvcHVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNpdGUtaGVhZGVyX19zZWFyY2gtcG9wdXBcIilbMF07XG5cbiAgaWYgKHRyaWdnZXJTZWFyY2hCb3ggPT09IG51bGwgfHwgc2VhcmNoUG9wdXAgPT09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVTZWFyY2hCb3hDbGljayhlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHNlYXJjaFBvcHVwLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XG4gICAgYm9keS5jbGFzc0xpc3QudG9nZ2xlKFwiZGlzYWJsZS1zY3JvbGwtc2VhcmNoXCIpO1xuICB9XG5cbiAgaWYgKHRyaWdnZXJTZWFyY2hCb3gpIHtcbiAgICB0cmlnZ2VyU2VhcmNoQm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVTZWFyY2hCb3hDbGljayk7XG4gIH1cblxuICBpZiAodHJpZ2dlclNlYXJjaEJveE1vYmlsZSkge1xuICAgIHRyaWdnZXJTZWFyY2hCb3hNb2JpbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZVNlYXJjaEJveENsaWNrKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cmlnZ2VyTW9iaWxlTWVudSgpIHtcbiAgY29uc3QgYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF07XG4gIGNvbnN0IGhhbWJ1cmdlciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzaXRlLWhlYWRlcl9fbW9iaWxlLXdyYXAtLWhhbWJ1cmdlclwiKVswXTtcbiAgY29uc3QgbW9iaWxlTW9iaWxlTWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtb2JpbGUtbWVudVwiKVswXTtcblxuICBpZiAoaGFtYnVyZ2VyID09PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgY2hpbGRyZW5aZXJvTGV2ZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjbW9iaWxlLW1lbnUtbmF2aWdhdGlvbiBsaS5jaGlsZHJlbi16ZXJvLWxldmVsLm1lbnUtaXRlbS1oYXMtY2hpbGRyZW4nKTtcbiAgY29uc3QgY2hpbGRyZW5GaXJzdExldmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI21vYmlsZS1tZW51LW5hdmlnYXRpb24gbGkuY2hpbGRyZW4tZmlyc3QtbGV2ZWwubWVudS1pdGVtLWhhcy1jaGlsZHJlbicpO1xuICBcbiAgY2hpbGRyZW5aZXJvTGV2ZWwuZm9yRWFjaCgoemVyb0l0ZW0pID0+IHtcbiAgICBjb25zdCBzdWJNZW51VG9nZ2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIHN1Yk1lbnVUb2dnbGUuY2xhc3NMaXN0LmFkZCgnc3ViLW1lbnUtdG9nZ2xlJyk7XG4gICAgXG4gICAgc3ViTWVudVRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG4gICAgICB0aGlzLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG4gICAgfSk7XG4gICAgXG4gICAgemVyb0l0ZW0uYXBwZW5kQ2hpbGQoc3ViTWVudVRvZ2dsZSk7XG4gIH0pO1xuXG4gIGNoaWxkcmVuRmlyc3RMZXZlbC5mb3JFYWNoKChmaXJzdExldmVsSXRlbSkgPT4ge1xuICAgIGNvbnN0IHN1Yk1lbnVUb2dnbGVGaXJzdExldmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIHN1Yk1lbnVUb2dnbGVGaXJzdExldmVsLmNsYXNzTGlzdC5hZGQoJ3N1Yi1tZW51LWxldmVsLXR3by10b2dnbGUnKTtcbiAgXG4gICAgc3ViTWVudVRvZ2dsZUZpcnN0TGV2ZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoJ21lbnUtYWN0aXZlJyk7XG4gICAgICB0aGlzLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnbWVudS1hY3RpdmUnKTtcbiAgICB9KTtcblxuICAgIGZpcnN0TGV2ZWxJdGVtLmFwcGVuZENoaWxkKHN1Yk1lbnVUb2dnbGVGaXJzdExldmVsKTtcbiAgfSk7XG5cbiAgaGFtYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoXCJoYW1idXJnZXItLWFjdGl2ZVwiKTtcbiAgICBtb2JpbGVNb2JpbGVNZW51LmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XG4gICAgYm9keS5jbGFzc0xpc3QudG9nZ2xlKFwiZGlzYWJsZS1zY3JvbGwtc2VhcmNoXCIpO1xuICB9KTtcbn1cblxub25SZWFkeSgoKSA9PiB7XG4gIHNob3dNZW51KCk7XG4gIGxhbmd1YWdlU3dpdGNoZXIoKTtcbiAgdHJpZ2dlclNlYXJjaEJveCgpO1xuICB0cmlnZ2VyTW9iaWxlTWVudSgpO1xuXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGdldE1haW5OYXZXaWR0aCgpO1xuICB9LCAyMDAwKTtcbn0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IG9uUmVhZHksIGRlYm91bmNlIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbmZ1bmN0aW9uIGluaXRDb250ZW50U3dpcGVyKCkge1xuICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGVudC1zbGlkZXJfX3N3aXBlclwiKS5sZW5ndGgpIHJldHVybjtcblxuICBjb25zdCBjb250ZW50X3N3aXBlciA9IG5ldyBTd2lwZXIoXCIuY29udGVudC1zbGlkZXJfX3N3aXBlclwiLCB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICBzbGlkZXNQZXJWaWV3OiAxLFxuICAgIHNwYWNlQmV0d2VlbjogMTMuOSxcbiAgICBsb29wOiBmYWxzZSxcbiAgICBicmVha3BvaW50czoge1xuICAgICAgMDoge1xuICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxuICAgICAgICBzcGFjZUJldHdlZW46IDIwXG4gICAgICB9LFxuICAgICAgNTIwOiB7XG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXG4gICAgICAgIHNwYWNlQmV0d2VlbjogMjBcbiAgICAgIH0sXG4gICAgICAxMDI0OiB7XG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDMsXG4gICAgICAgIHNwYWNlQmV0d2VlbjogMjRcbiAgICAgIH1cbiAgICB9LFxuICAgIHBhZ2luYXRpb246IHtcbiAgICAgIGVsOiBcIi5zd2lwZXItcGFnaW5hdGlvblwiLFxuICAgICAgdHlwZTogXCJwcm9ncmVzc2JhclwiXG4gICAgfSxcbiAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICBwcmV2RWw6IFwiLnN3aXBlci1wYWdpbmF0aW9uX19zd2lwZXItYnV0dG9uLXByZXZcIixcbiAgICAgIG5leHRFbDogXCIuc3dpcGVyLXBhZ2luYXRpb25fX3N3aXBlci1idXR0b24tbmV4dFwiXG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gaW5pdFRpbWVsaW5lU3dpcGVyKCkge1xuICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGltZWxpbmUtc2xpZGVyX19zd2lwZXJcIikubGVuZ3RoKSByZXR1cm47XG5cbiAgY29uc3QgdGltbGluZV9zd2lwZXIgPSBuZXcgU3dpcGVyKFwiLnRpbWVsaW5lLXNsaWRlcl9fc3dpcGVyXCIsIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgIHNsaWRlc1BlclZpZXc6IDUsXG4gICAgbG9vcDogZmFsc2UsXG4gICAgYnJlYWtwb2ludHM6IHtcbiAgICAgIDA6IHtcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMVxuICAgICAgfSxcbiAgICAgIDUwMToge1xuICAgICAgICBzbGlkZXNQZXJWaWV3OiAyXG4gICAgICB9LFxuICAgICAgOTkyOiB7XG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDNcbiAgICAgIH0sXG4gICAgICAxMTAwOiB7XG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDRcbiAgICAgIH1cbiAgICB9LFxuICAgIG5hdmlnYXRpb246IHtcbiAgICAgIHByZXZFbDogXCIuc3dpcGVyLXBhZ2luYXRpb25fX3N3aXBlci1idXR0b24tcHJldlwiLFxuICAgICAgbmV4dEVsOiBcIi5zd2lwZXItcGFnaW5hdGlvbl9fc3dpcGVyLWJ1dHRvbi1uZXh0XCJcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjYWxjVGltZWxpbmVTd2lwZXJIZWlnaHQoKSB7XG4gIGNvbnN0IHNsaWRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50aW1lbGluZS1zbGlkZXJfX3NsaWRlJyk7XG5cbiAgaWYgKCFzbGlkZXMubGVuZ3RoKSByZXR1cm47XG5cbiAgbGV0IG1heEhlaWdodCA9IDA7XG5cbiAgc2xpZGVzLmZvckVhY2goZnVuY3Rpb24oIHNsaWRlICkge1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IHNsaWRlLnF1ZXJ5U2VsZWN0b3IoJy50aW1lbGluZS1zbGlkZXJfX3RpbWVzdGFtcCcpO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBzbGlkZS5xdWVyeVNlbGVjdG9yKCcudGltZWxpbmUtc2xpZGVyX19jb250ZW50Jyk7XG5cbiAgICBpZiAoIXRpbWVzdGFtcCB8fCAhY29udGVudCkgcmV0dXJuO1xuICAgIGxldCB0aW1lc3RhbXBIZWlnaHQgPSB0aW1lc3RhbXAub2Zmc2V0SGVpZ2h0O1xuICAgIGxldCBjb250ZW50SGVpZ2h0ID0gY29udGVudC5vZmZzZXRIZWlnaHQ7XG5cbiAgICBtYXhIZWlnaHQgPSBNYXRoLm1heChtYXhIZWlnaHQsIHRpbWVzdGFtcEhlaWdodCwgY29udGVudEhlaWdodCk7XG4gIH0pO1xuXG4gIHNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uKCBzbGlkZSApIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBzbGlkZS5xdWVyeVNlbGVjdG9yKCcudGltZWxpbmUtc2xpZGVyX190aW1lc3RhbXAnKTtcbiAgICBjb25zdCBjb250ZW50ID0gc2xpZGUucXVlcnlTZWxlY3RvcignLnRpbWVsaW5lLXNsaWRlcl9fY29udGVudCcpO1xuXG4gICAgaWYgKCF0aW1lc3RhbXAgfHwgIWNvbnRlbnQpIHJldHVybjtcbiAgICB0aW1lc3RhbXAuc3R5bGUuaGVpZ2h0ID0gbWF4SGVpZ2h0ICsgJ3B4JztcbiAgICBjb250ZW50LnN0eWxlLmhlaWdodCA9IG1heEhlaWdodCArICdweCc7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiB0aW1saW5lU3dpcGVyTW9iaWxlICgpIHtcblxuICBsZXQgc2xpZGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRpbWVsaW5lLXNsaWRlcl9fc2xpZGUnKTtcblxuICBpZiAoIXNsaWRlcy5sZW5ndGgpIHJldHVybjtcblxuICBpZiAod2luZG93Lm1hdGNoTWVkaWEoXCIobWF4LXdpZHRoOiA1MDFweClcIikubWF0Y2hlcykge1xuXG4gICAgc2xpZGVzLmZvckVhY2goZnVuY3Rpb24oc2xpZGUpIHtcbiAgICAgIGlmICghc2xpZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdzd2lwZXItc2xpZGVfX2luaXRpYWwnKSkge1xuICAgICAgICBzbGlkZS5jbGFzc0xpc3QuYWRkKCdzd2lwZXItc2xpZGVfX2luaXRpYWwnKTtcbiAgICAgICAgc2xpZGUuY2xhc3NMaXN0LmFkZCgnc3dpcGVyLXNsaWRlX19pbml0aWFsLS1tb2JpbGUnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBzbGlkZXMuZm9yRWFjaChmdW5jdGlvbihzbGlkZSkge1xuICAgICAgaWYgKHNsaWRlLmNsYXNzTGlzdC5jb250YWlucygnc3dpcGVyLXNsaWRlX19pbml0aWFsLS1tb2JpbGUnKSkge1xuICAgICAgICBzbGlkZS5jbGFzc0xpc3QucmVtb3ZlKCdzd2lwZXItc2xpZGVfX2luaXRpYWwnKTtcbiAgICAgICAgc2xpZGUuY2xhc3NMaXN0LnJlbW92ZSgnc3dpcGVyLXNsaWRlX19pbml0aWFsLS1tb2JpbGUnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5sZXQgcHJvZmlsZXNfc3dpcGVyOyAvLyBEZWNsYXJlIHRoZSB2YXJpYWJsZSBvdXRzaWRlIHRoZSBmdW5jdGlvbnMgc28gd2UgY2FuIGFjY2VzcyBpdCBpbnNpZGUgYWxsIGZ1bmN0aW9uc1xuXG5mdW5jdGlvbiBpbml0TW9iaWxlUHJvZmlsZXMoKSB7XG4gIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5ibG9jay1wcm9maWxlc19fc3dpcGVyXCIpLmxlbmd0aCkgcmV0dXJuO1xuXG4gIHByb2ZpbGVzX3N3aXBlciA9IG5ldyBTd2lwZXIoXCIuYmxvY2stcHJvZmlsZXNfX3N3aXBlclwiLCB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICBzbGlkZXNQZXJWaWV3OiAxLFxuICAgIGxvb3A6IGZhbHNlLFxuICAgIGJyZWFrcG9pbnRzOiB7XG4gICAgICAwOiB7XG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDFcbiAgICAgIH0sXG4gICAgICA3Njg6IHtcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMixcbiAgICAgICAgc3BhY2VCZXR3ZWVuOiAzMFxuICAgICAgfSxcbiAgICAgIDk5Mjoge1xuICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxuICAgICAgICBzcGFjZUJldHdlZW46IDMwXG4gICAgICB9XG4gICAgfSxcbiAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICBwcmV2RWw6IFwiLnN3aXBlci1wYWdpbmF0aW9uX19zd2lwZXItYnV0dG9uLXByZXZcIixcbiAgICAgIG5leHRFbDogXCIuc3dpcGVyLXBhZ2luYXRpb25fX3N3aXBlci1idXR0b24tbmV4dFwiXG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gZGVzdHJveU1vYmlsZVByb2ZpbGVzKCkge1xuICBpZiAocHJvZmlsZXNfc3dpcGVyICE9PSB1bmRlZmluZWQgJiYgcHJvZmlsZXNfc3dpcGVyICE9PSBudWxsKSB7XG4gICAgcHJvZmlsZXNfc3dpcGVyLmRlc3Ryb3kodHJ1ZSwgdHJ1ZSk7XG4gICAgcHJvZmlsZXNfc3dpcGVyID0gbnVsbDsgLy8gUmVzZXQgdGhlIHZhcmlhYmxlXG4gIH1cbn1cblxuZnVuY3Rpb24gY2FsY09mZnNldEVsZW1lbnRIZWlnaHQgKCkge1xuICBjb25zdCBvZmZzZXRFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vZmZzZXQtZWxlbWVudCcpO1xuICBjb25zdCBvZmZzZXRFbGVtZW50Q29udGVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYmxvY2stcHJvZmlsZXNfX3N3aXBlci0td3JhcHBlci0tY29udGVudCcpO1xuXG4gIGlmICghb2Zmc2V0RWxlbWVudHMubGVuZ3RoIHx8ICFvZmZzZXRFbGVtZW50Q29udGVudHMubGVuZ3RoKSByZXR1cm47XG5cbiAgb2Zmc2V0RWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiggb2Zmc2V0RWxlbWVudCwgaW5kZXggKSB7XG4gICAgY29uc3Qgb2Zmc2V0RWxlbWVudEhlaWdodCA9IG9mZnNldEVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuXG4gICAgLy8gVXNlIHRoZSBpbmRleCBvZiB0aGUgY3VycmVudCBvZmZzZXRFbGVtZW50IHRvIGFjY2VzcyB0aGUgY29ycmVzcG9uZGluZyBvZmZzZXRFbGVtZW50Q29udGVudFxuICAgIGNvbnN0IG9mZnNldEVsZW1lbnRDb250ZW50ID0gb2Zmc2V0RWxlbWVudENvbnRlbnRzW2luZGV4XTtcblxuICAgIGlmICghb2Zmc2V0RWxlbWVudENvbnRlbnQpIHJldHVybjtcblxuICAgIG9mZnNldEVsZW1lbnRDb250ZW50LnN0eWxlLmJvdHRvbSA9IC0gb2Zmc2V0RWxlbWVudEhlaWdodCArICdweCc7XG4gIH0pO1xufVxuXG5vblJlYWR5KCgpID0+IHtcbiAgaW5pdENvbnRlbnRTd2lwZXIoKTtcbiAgaW5pdFRpbWVsaW5lU3dpcGVyKCk7XG4gIGlmKHdpbmRvdy5pbm5lcldpZHRoID4gNTAxKSB7XG4gICAgY2FsY1RpbWVsaW5lU3dpcGVySGVpZ2h0KCk7XG4gIH1cbiAgdGltbGluZVN3aXBlck1vYmlsZSgpO1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBkZWJvdW5jZSh0aW1saW5lU3dpcGVyTW9iaWxlLCAyMDApKTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZGVib3VuY2UoZnVuY3Rpb24oKSB7XG4gICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1pbi13aWR0aDogNzY4cHgpIGFuZCAobWF4LXdpZHRoOiA5OTJweClcIikubWF0Y2hlcyB8fFxuICAgICAgICB3aW5kb3cubWF0Y2hNZWRpYShcIihtaW4td2lkdGg6IDk5MnB4KSBhbmQgKG1heC13aWR0aDogMTM2NnB4KVwiKS5tYXRjaGVzIHx8XG4gICAgICAgIHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1pbi13aWR0aDogMTM2NnB4KVwiKS5tYXRjaGVzKSB7XG4gICAgICBjYWxjVGltZWxpbmVTd2lwZXJIZWlnaHQoKTtcbiAgICB9XG4gIH0sIDIwMCkpO1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBkZWJvdW5jZShmdW5jdGlvbigpIHtcbiAgICBpZih3aW5kb3cuaW5uZXJXaWR0aCA8IDEwMjQpIHtcbiAgICAgIGluaXRNb2JpbGVQcm9maWxlcygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZXN0cm95TW9iaWxlUHJvZmlsZXMoKTtcbiAgICB9XG4gIH0sIDIwMCkpO1xuXG4gIGlmKHdpbmRvdy5pbm5lcldpZHRoIDwgMTAyNCkge1xuICAgIGluaXRNb2JpbGVQcm9maWxlcygpO1xuICB9IGVsc2Uge1xuICAgIGRlc3Ryb3lNb2JpbGVQcm9maWxlcygpO1xuICB9XG5cbiAgY2FsY09mZnNldEVsZW1lbnRIZWlnaHQoKTtcblxufSk7XG4iLCIoKCkgPT4ge1xuICByZXF1aXJlKFwiLi9jb21wb25lbnRzL2hlYWRlci5qc1wiKTtcbiAgcmVxdWlyZShcIi4vY29tcG9uZW50cy9zd2lwZXIuanNcIik7XG4gIHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvZmV0Y2gtcG9zdHMuanNcIik7XG59KSgpOyIsIi8qKlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSB1c2VyIGRlZmluZWQgZnVuY3Rpb24gdG8gZXhlY3V0ZSBvbmx5IHVwb24gc3VjY2Vzc2Z1bCBET00gbG9hZFxuICovXG5leHBvcnQgY29uc3Qgb25SZWFkeSA9IChmbikgPT4ge1xuICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gXCJsb2FkaW5nXCIpIHtcbiAgICBmbigpO1xuICB9IGVsc2Uge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZuKTtcbiAgfVxufTtcblxuLyoqXG4gKiBFeGVjdXRlIGEgZ2l2ZW4gZnVuY3Rpb24gYWZ0ZXIgYSBnaXZpbmcgdGltZW91dCBwZXJpb2RcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBjYWxsXG4gKiBAcGFyYW0ge251bWJlcn0gdGltZW91dCBJbiBtaWxpc2Vjb25kcyB0aGUgYW1vdW50IG9mIHRpbWUgdG8gd2FpdFxuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5leHBvcnQgY29uc3QgZGVib3VuY2UgPSAoZm4sIHRpbWVvdXQpID0+IHtcbiAgbGV0IHRpbWVvdXRJZDtcblxuICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGZuLmFwcGx5KHRoaXMsIGFyZ3MpLCB0aW1lb3V0KTtcbiAgfTtcbn07Il19
