(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

var _utils = require("../utils");
function fetch_posts() {
  const loadMoreBtn = document.querySelector(".load--more");
  if (loadMoreBtn === null) {
    return;
  }
  if (document.querySelector(".site-main").dataset.page == document.querySelector(".site-main").dataset.max) {
    loadMoreBtn.style.display = "none";
  }
  loadMoreBtn.addEventListener("click", async e => {
    e.preventDefault();
    let currentPage = '';
    let postsGrid = document.querySelector(".posts-grid");
    if (postsGrid) {
      currentPage = document.querySelector(".posts-grid").dataset.page;
    } else {
      currentPage = document.querySelector(".site-main").dataset.page;
    }
    let maxPages = document.querySelector(".site-main").dataset.max;
    let isSearch = document.querySelector(".site-main").dataset.search === "is-search";
    let searchField = document.querySelector(".search-form__search-field");
    let searchQuery = '';
    if (searchField) {
      searchQuery = searchField.value;
    }
    let isBlock = postsGrid ? postsGrid.dataset.block === "is-block" : false;
    const postsGridWrapper = document.getElementsByClassName("posts-grid__wrapper")[0];
    const postsGridBtnWrapper = document.getElementsByClassName("posts-grid__btn-wrapper")[0];
    const moreData = new FormData();
    moreData.append("action", "load_more_posts");
    moreData.append("currentPage", currentPage);
    moreData.append("searchQuery", searchQuery);
    moreData.append('_nonce', WP_vars.nonce); // eslint-disable-line

    const dataCall = await fetch(WP_vars.ajaxURL, {
      // eslint-disable-line
      method: "POST",
      body: moreData
    }).then(res => {
      if (res.ok) {
        return res.json(); // Parse the JSON response
      } else {
        throw new Error(`Request failed with status: ${res.status}`);
      }
    }).then(data => {
      if (data && data.data) {
        const htmlString = data.data[0]; // Extract the HTML content from the response

        const maxPages = data.data[1];
        postsGridBtnWrapper.insertAdjacentHTML("beforebegin", htmlString);
        if (!isSearch && !isBlock) {
          let getUrl = window.location;
          let baseUrl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split('/')[1];
          window.history.pushState('', '', baseUrl + '/page/' + (parseInt(document.querySelector(".site-main").dataset.page) + 1));
        }
        document.querySelector(".site-main").dataset.page++;
        if (document.querySelector(".site-main").dataset.page == document.querySelector(".site-main").dataset.max) {
          loadMoreBtn.style.display = "none";
        }
        if (isSearch) {
          if (document.querySelector(".site-main").dataset.page == maxPages) {
            loadMoreBtn.style.display = "none";
          }
        }
      } else {
        console.warn('Invalid data received from the server');
      }
    }).catch(err => console.warn(err));
  });
}
(0, _utils.onReady)(() => {
  fetch_posts();
});

},{"../utils":5}],2:[function(require,module,exports){
"use strict";

var _utils = require("../utils");
function showMenu() {
  const navigation = document.getElementById("main-navigation");
  const menuItems = document.querySelectorAll("#main-navigation li.children-zero-level.menu-item-has-children");
  const menuOverlay = document.getElementsByClassName("site-header__nav-overlay")[0];
  if (navigation === null || menuItems.length === 0) {
    return;
  }
  menuItems.forEach(menuItem => {
    menuItem.addEventListener("mouseenter", function () {
      navigation.classList.add("menu-active");
      menuOverlay.classList.add("overlay-active");
      this.classList.add("active");
    });
    menuItem.addEventListener("mouseleave", function () {
      navigation.classList.remove("menu-active");
      menuOverlay.classList.remove("overlay-active");
      this.classList.remove("active");
    });
  });
  const subMenu = document.querySelectorAll('.sub-menu li.menu-item-has-children');
  subMenu.forEach(menuItem => {
    menuItem.addEventListener("mouseenter", function () {
      this.classList.add("active");
    });
    menuItem.addEventListener("mouseleave", function () {
      this.classList.remove("active");
    });
  });
}
function getMainNavWidth() {
  const mainNavWidth = document.getElementById("mainNavWidth");
  const getWidth = mainNavWidth.offsetWidth;
  if (getWidth === null) {
    return;
  }
  document.documentElement.style.setProperty("--mainNavWidth", getWidth + "px");
}
function toggleLanguageSwitcher(id, menuClass) {
  const body = document.getElementsByTagName('body')[0];
  const languageIcon = document.getElementById(id);
  const langSubMenu = document.getElementsByClassName(menuClass)[0];
  if (!languageIcon) return;
  languageIcon.addEventListener('click', e => {
    e.stopPropagation();
    langSubMenu.classList.toggle('active');
  });
  body.addEventListener('click', e => {
    if (!e.target.classList.contains(menuClass)) langSubMenu.classList.remove('active');
  });
}
function languageSwitcher() {
  toggleLanguageSwitcher("languageIcon", "lang-sub-menu");
  toggleLanguageSwitcher("languageIconMobile", "lang-sub-menu-mobile");
}
function triggerSearchBox() {
  const body = document.getElementsByTagName('body')[0];
  const triggerSearchBox = document.getElementById("triggerSearchBox");
  const triggerSearchBoxMobile = document.getElementById("triggerSearchBoxMobile");
  const searchPopup = document.getElementsByClassName("site-header__search-popup")[0];
  if (triggerSearchBox === null || searchPopup === null) {
    return;
  }
  function handleSearchBoxClick() {
    searchPopup.classList.toggle("active");
    body.classList.toggle("disable-scroll-search");
  }
  if (triggerSearchBox) {
    triggerSearchBox.addEventListener("click", handleSearchBoxClick);
  }
  if (triggerSearchBoxMobile) {
    triggerSearchBoxMobile.addEventListener("click", handleSearchBoxClick);
  }
}
function triggerMobileMenu() {
  const body = document.getElementsByTagName('body')[0];
  const hamburger = document.getElementsByClassName("site-header__mobile-wrap--hamburger")[0];
  const mobileMobileMenu = document.getElementsByClassName("mobile-menu")[0];
  if (hamburger === null) {
    return;
  }
  const childrenZeroLevel = document.querySelectorAll('#mobile-menu-navigation li.children-zero-level.menu-item-has-children');
  const childrenFirstLevel = document.querySelectorAll('#mobile-menu-navigation li.children-first-level.menu-item-has-children');
  childrenZeroLevel.forEach(zeroItem => {
    const subMenuToggle = document.createElement('span');
    subMenuToggle.classList.add('sub-menu-toggle');
    subMenuToggle.addEventListener('click', function () {
      this.classList.toggle('active');
      this.parentElement.classList.toggle('active');
    });
    zeroItem.appendChild(subMenuToggle);
  });
  childrenFirstLevel.forEach(firstLevelItem => {
    const subMenuToggleFirstLevel = document.createElement('span');
    subMenuToggleFirstLevel.classList.add('sub-menu-level-two-toggle');
    subMenuToggleFirstLevel.addEventListener('click', function () {
      this.classList.toggle('menu-active');
      this.parentElement.classList.toggle('menu-active');
    });
    firstLevelItem.appendChild(subMenuToggleFirstLevel);
  });
  hamburger.addEventListener("click", function () {
    this.classList.toggle("hamburger--active");
    mobileMobileMenu.classList.toggle("active");
    body.classList.toggle("disable-scroll-search");
  });
}
(0, _utils.onReady)(() => {
  showMenu();
  languageSwitcher();
  triggerSearchBox();
  triggerMobileMenu();

  // TODO: Remove this after fixing the font loading issue.
  setTimeout(() => {
    getMainNavWidth();
  }, 2000);
});

},{"../utils":5}],3:[function(require,module,exports){
"use strict";

var _utils = require("../utils");
function initSwiper() {
  if (!document.querySelectorAll(".content-slider__swiper").length) return;
  const swiper = new Swiper(".content-slider__swiper", {
    // eslint-disable-line
    slidesPerView: 1,
    spaceBetween: 13.9,
    loop: true,
    breakpoints: {
      0: {
        slidesPerView: 1,
        spaceBetween: 20
      },
      768: {
        slidesPerView: 2,
        spaceBetween: 20
      },
      1366: {
        slidesPerView: 3,
        spaceBetween: 24
      }
    },
    pagination: {
      el: ".swiper-pagination",
      type: "progressbar"
    },
    navigation: {
      prevEl: ".swiper-pagination__swiper-button-prev",
      nextEl: ".swiper-pagination__swiper-button-next"
    }
  });
}
(0, _utils.onReady)(() => {
  initSwiper();
});

},{"../utils":5}],4:[function(require,module,exports){
"use strict";

(() => {
  require("./components/header.js");
  require("./components/swiper.js");
  require("./components/fetch-posts.js");
})();

},{"./components/fetch-posts.js":1,"./components/header.js":2,"./components/swiper.js":3}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.onReady = exports.debounce = void 0;
/**
 *
 * @param {Function} fn The user defined function to execute only upon successful DOM load
 */
const onReady = fn => {
  if (document.readyState !== "loading") {
    fn();
  } else {
    document.addEventListener("DOMContentLoaded", fn);
  }
};

/**
 * Execute a given function after a giving timeout period
 * @param {Function} fn The function to call
 * @param {number} timeout In miliseconds the amount of time to wait
 * @returns {Function}
 */
exports.onReady = onReady;
const debounce = (fn, timeout) => {
  let timeoutId;
  return function () {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    clearTimeout(timeoutId);
    timeoutId = setTimeout(() => fn.apply(this, args), timeout);
  };
};
exports.debounce = debounce;

},{}]},{},[1,2,3,4,5])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhc3NldHMvcHVibGljL3NyYy9qcy9jb21wb25lbnRzL2ZldGNoLXBvc3RzLmpzIiwiYXNzZXRzL3B1YmxpYy9zcmMvanMvY29tcG9uZW50cy9oZWFkZXIuanMiLCJhc3NldHMvcHVibGljL3NyYy9qcy9jb21wb25lbnRzL3N3aXBlci5qcyIsImFzc2V0cy9wdWJsaWMvc3JjL2pzL2RlZmF1bHQuanMiLCJhc3NldHMvcHVibGljL3NyYy9qcy91dGlscy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLFlBQVk7O0FBRVosSUFBQSxNQUFBLEdBQUEsT0FBQTtBQUVBLFNBQVMsV0FBVyxDQUFBLEVBQUc7RUFDckIsTUFBTSxXQUFXLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUM7RUFFekQsSUFBSSxXQUFXLEtBQUssSUFBSSxFQUFFO0lBQ3hCO0VBQ0Y7RUFFQSxJQUFJLFFBQVEsQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksSUFBSSxRQUFRLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUU7SUFDekcsV0FBVyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsTUFBTTtFQUNwQztFQUVBLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsTUFBTyxDQUFDLElBQUs7SUFDakQsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBRWxCLElBQUksV0FBVyxHQUFHLEVBQUU7SUFFcEIsSUFBSSxTQUFTLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUM7SUFFckQsSUFBSyxTQUFTLEVBQUc7TUFDZixXQUFXLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSTtJQUNsRSxDQUFDLE1BQU07TUFDTCxXQUFXLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSTtJQUNqRTtJQUVBLElBQUksUUFBUSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUc7SUFDL0QsSUFBSSxRQUFRLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxLQUFLLFdBQVc7SUFFbEYsSUFBSSxXQUFXLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyw0QkFBNEIsQ0FBQztJQUV0RSxJQUFJLFdBQVcsR0FBRyxFQUFFO0lBRXBCLElBQUssV0FBVyxFQUFHO01BQ2pCLFdBQVcsR0FBRyxXQUFXLENBQUMsS0FBSztJQUNqQztJQUVBLElBQUksT0FBTyxHQUFHLFNBQVMsR0FBRyxTQUFTLENBQUMsT0FBTyxDQUFDLEtBQUssS0FBSyxVQUFVLEdBQUcsS0FBSztJQUV4RSxNQUFNLGdCQUFnQixHQUFHLFFBQVEsQ0FBQyxzQkFBc0IsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsRixNQUFNLG1CQUFtQixHQUFHLFFBQVEsQ0FBQyxzQkFBc0IsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUV6RixNQUFNLFFBQVEsR0FBRyxJQUFJLFFBQVEsQ0FBQyxDQUFDO0lBRS9CLFFBQVEsQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLGlCQUFpQixDQUFDO0lBQzVDLFFBQVEsQ0FBQyxNQUFNLENBQUMsYUFBYSxFQUFFLFdBQVcsQ0FBQztJQUMzQyxRQUFRLENBQUMsTUFBTSxDQUFDLGFBQWEsRUFBRSxXQUFXLENBQUM7SUFDM0MsUUFBUSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7O0lBRTFDLE1BQU0sUUFBUSxHQUFHLE1BQU0sS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUU7TUFBRTtNQUM5QyxNQUFNLEVBQUUsTUFBTTtNQUNkLElBQUksRUFBRTtJQUNSLENBQUMsQ0FBQyxDQUNDLElBQUksQ0FBRSxHQUFHLElBQUs7TUFDYixJQUFJLEdBQUcsQ0FBQyxFQUFFLEVBQUU7UUFDVixPQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7TUFDckIsQ0FBQyxNQUFNO1FBQ0wsTUFBTSxJQUFJLEtBQUssQ0FBRSwrQkFBOEIsR0FBRyxDQUFDLE1BQU8sRUFBQyxDQUFDO01BQzlEO0lBQ0YsQ0FBQyxDQUFDLENBQ0QsSUFBSSxDQUFFLElBQUksSUFBSztNQUNkLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUU7UUFDckIsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOztRQUVqQyxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUU3QixtQkFBbUIsQ0FBQyxrQkFBa0IsQ0FBQyxhQUFhLEVBQUUsVUFBVSxDQUFDO1FBRWpFLElBQUssQ0FBRSxRQUFRLElBQUksQ0FBRSxPQUFPLEVBQUc7VUFDN0IsSUFBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLFFBQVE7VUFDNUIsSUFBSSxPQUFPLEdBQUcsTUFBTSxDQUFDLFFBQVEsR0FBRyxJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1VBQ3hGLE1BQU0sQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxHQUFHLFFBQVEsSUFBSSxRQUFRLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDMUg7UUFFQSxRQUFRLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUU7UUFFbkQsSUFBSSxRQUFRLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksUUFBUSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFO1VBQ3pHLFdBQVcsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLE1BQU07UUFDcEM7UUFFQSxJQUFLLFFBQVEsRUFBRztVQUNkLElBQUssUUFBUSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLFFBQVEsRUFBRztZQUNuRSxXQUFXLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNO1VBQ3BDO1FBQ0Y7TUFDRixDQUFDLE1BQU07UUFDTCxPQUFPLENBQUMsSUFBSSxDQUFDLHVDQUF1QyxDQUFDO01BQ3ZEO0lBQ0YsQ0FBQyxDQUFDLENBQ0QsS0FBSyxDQUFFLEdBQUcsSUFBSyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQ3RDLENBQUMsQ0FBQztBQUNKO0FBRUEsSUFBQSxjQUFPLEVBQUMsTUFBTTtFQUNaLFdBQVcsQ0FBQyxDQUFDO0FBQ2YsQ0FBQyxDQUFDOzs7QUNqR0YsWUFBWTs7QUFFWixJQUFBLE1BQUEsR0FBQSxPQUFBO0FBRUEsU0FBUyxRQUFRLENBQUEsRUFBRztFQUNsQixNQUFNLFVBQVUsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLGlCQUFpQixDQUFDO0VBQzdELE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxnRUFBZ0UsQ0FBQztFQUM3RyxNQUFNLFdBQVcsR0FBRyxRQUFRLENBQUMsc0JBQXNCLENBQ2pELDBCQUNGLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFHSixJQUFJLFVBQVUsS0FBSyxJQUFJLElBQUksU0FBUyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7SUFDakQ7RUFDRjtFQUVBLFNBQVMsQ0FBQyxPQUFPLENBQUUsUUFBUSxJQUFLO0lBQzlCLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxZQUFZLEVBQUUsWUFBVztNQUNqRCxVQUFVLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUM7TUFDdkMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUM7TUFDM0MsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDO0lBQzlCLENBQUMsQ0FBQztJQUVGLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxZQUFZLEVBQUUsWUFBVztNQUNqRCxVQUFVLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUM7TUFDMUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsZ0JBQWdCLENBQUM7TUFDOUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDO0lBQ2pDLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUdGLE1BQU0sT0FBTyxHQUFHLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxxQ0FBcUMsQ0FBQztFQUVoRixPQUFPLENBQUMsT0FBTyxDQUFFLFFBQVEsSUFBSztJQUM1QixRQUFRLENBQUMsZ0JBQWdCLENBQUMsWUFBWSxFQUFFLFlBQVc7TUFDakQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDO0lBQzlCLENBQUMsQ0FBQztJQUVGLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxZQUFZLEVBQUUsWUFBVztNQUNqRCxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUM7SUFDakMsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0FBRUo7QUFFQSxTQUFTLGVBQWUsQ0FBQSxFQUFHO0VBQ3pCLE1BQU0sWUFBWSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsY0FBYyxDQUFDO0VBQzVELE1BQU0sUUFBUSxHQUFHLFlBQVksQ0FBQyxXQUFXO0VBRXpDLElBQUksUUFBUSxLQUFLLElBQUksRUFBRTtJQUNyQjtFQUNGO0VBRUEsUUFBUSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLGdCQUFnQixFQUFFLFFBQVEsR0FBRyxJQUFJLENBQUM7QUFDL0U7QUFFQSxTQUFTLHNCQUFzQixDQUFDLEVBQUUsRUFBRSxTQUFTLEVBQUU7RUFDN0MsTUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNyRCxNQUFNLFlBQVksR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLEVBQUUsQ0FBQztFQUNoRCxNQUFNLFdBQVcsR0FBRyxRQUFRLENBQUMsc0JBQXNCLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBRWpFLElBQUksQ0FBQyxZQUFZLEVBQUU7RUFFbkIsWUFBWSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDLElBQUk7SUFDMUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0lBQ25CLFdBQVcsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQztFQUN4QyxDQUFDLENBQUM7RUFFRixJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsSUFBSTtJQUNsQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQztFQUNyRixDQUFDLENBQUM7QUFDSjtBQUVBLFNBQVMsZ0JBQWdCLENBQUEsRUFBRztFQUMxQixzQkFBc0IsQ0FBQyxjQUFjLEVBQUUsZUFBZSxDQUFDO0VBQ3ZELHNCQUFzQixDQUFDLG9CQUFvQixFQUFFLHNCQUFzQixDQUFDO0FBQ3RFO0FBRUEsU0FBUyxnQkFBZ0IsQ0FBQSxFQUFHO0VBQzFCLE1BQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDckQsTUFBTSxnQkFBZ0IsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLGtCQUFrQixDQUFDO0VBQ3BFLE1BQU0sc0JBQXNCLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyx3QkFBd0IsQ0FBQztFQUNoRixNQUFNLFdBQVcsR0FBRyxRQUFRLENBQUMsc0JBQXNCLENBQUMsMkJBQTJCLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFFbkYsSUFBSSxnQkFBZ0IsS0FBSyxJQUFJLElBQUksV0FBVyxLQUFLLElBQUksRUFBRTtJQUNyRDtFQUNGO0VBRUEsU0FBUyxvQkFBb0IsQ0FBQSxFQUFHO0lBQzlCLFdBQVcsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQztJQUN0QyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyx1QkFBdUIsQ0FBQztFQUNoRDtFQUVBLElBQUksZ0JBQWdCLEVBQUU7SUFDcEIsZ0JBQWdCLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLG9CQUFvQixDQUFDO0VBQ2xFO0VBRUEsSUFBSSxzQkFBc0IsRUFBRTtJQUMxQixzQkFBc0IsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsb0JBQW9CLENBQUM7RUFDeEU7QUFDRjtBQUVBLFNBQVMsaUJBQWlCLENBQUEsRUFBRztFQUMzQixNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsb0JBQW9CLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ3JELE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxzQkFBc0IsQ0FBQyxxQ0FBcUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUMzRixNQUFNLGdCQUFnQixHQUFHLFFBQVEsQ0FBQyxzQkFBc0IsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFFMUUsSUFBSSxTQUFTLEtBQUssSUFBSSxFQUFFO0lBQ3RCO0VBQ0Y7RUFFQSxNQUFNLGlCQUFpQixHQUFHLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyx1RUFBdUUsQ0FBQztFQUM1SCxNQUFNLGtCQUFrQixHQUFHLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyx3RUFBd0UsQ0FBQztFQUU5SCxpQkFBaUIsQ0FBQyxPQUFPLENBQUUsUUFBUSxJQUFLO0lBQ3RDLE1BQU0sYUFBYSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDO0lBQ3BELGFBQWEsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDO0lBRTlDLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsWUFBWTtNQUNsRCxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUM7TUFDL0IsSUFBSSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQztJQUMvQyxDQUFDLENBQUM7SUFFRixRQUFRLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQztFQUNyQyxDQUFDLENBQUM7RUFFRixrQkFBa0IsQ0FBQyxPQUFPLENBQUUsY0FBYyxJQUFLO0lBQzdDLE1BQU0sdUJBQXVCLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUM7SUFDOUQsdUJBQXVCLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQywyQkFBMkIsQ0FBQztJQUVsRSx1QkFBdUIsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsWUFBWTtNQUM1RCxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUM7TUFDcEMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQztJQUNwRCxDQUFDLENBQUM7SUFFRixjQUFjLENBQUMsV0FBVyxDQUFDLHVCQUF1QixDQUFDO0VBQ3JELENBQUMsQ0FBQztFQUVGLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsWUFBVztJQUM3QyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQztJQUMxQyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQztJQUMzQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyx1QkFBdUIsQ0FBQztFQUNoRCxDQUFDLENBQUM7QUFDSjtBQUVBLElBQUEsY0FBTyxFQUFDLE1BQU07RUFDWixRQUFRLENBQUMsQ0FBQztFQUNWLGdCQUFnQixDQUFDLENBQUM7RUFDbEIsZ0JBQWdCLENBQUMsQ0FBQztFQUNsQixpQkFBaUIsQ0FBQyxDQUFDOztFQUVuQjtFQUNBLFVBQVUsQ0FBQyxNQUFNO0lBQ2YsZUFBZSxDQUFDLENBQUM7RUFDbkIsQ0FBQyxFQUFFLElBQUksQ0FBQztBQUNWLENBQUMsQ0FBQzs7O0FDM0pGLFlBQVk7O0FBRVosSUFBQSxNQUFBLEdBQUEsT0FBQTtBQUVBLFNBQVMsVUFBVSxDQUFBLEVBQUc7RUFDcEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLE1BQU0sRUFBRTtFQUVsRSxNQUFNLE1BQU0sR0FBRyxJQUFJLE1BQU0sQ0FBQyx5QkFBeUIsRUFBRTtJQUFFO0lBQ3JELGFBQWEsRUFBRSxDQUFDO0lBQ2hCLFlBQVksRUFBRSxJQUFJO0lBQ2xCLElBQUksRUFBRSxJQUFJO0lBQ1YsV0FBVyxFQUFFO01BQ1gsQ0FBQyxFQUFFO1FBQ0QsYUFBYSxFQUFFLENBQUM7UUFDaEIsWUFBWSxFQUFFO01BQ2hCLENBQUM7TUFDRCxHQUFHLEVBQUU7UUFDSCxhQUFhLEVBQUUsQ0FBQztRQUNoQixZQUFZLEVBQUU7TUFDaEIsQ0FBQztNQUNELElBQUksRUFBRTtRQUNKLGFBQWEsRUFBRSxDQUFDO1FBQ2hCLFlBQVksRUFBRTtNQUNoQjtJQUNGLENBQUM7SUFDRCxVQUFVLEVBQUU7TUFDVixFQUFFLEVBQUUsb0JBQW9CO01BQ3hCLElBQUksRUFBRTtJQUNSLENBQUM7SUFDRCxVQUFVLEVBQUU7TUFDVixNQUFNLEVBQUUsd0NBQXdDO01BQ2hELE1BQU0sRUFBRTtJQUNWO0VBQ0YsQ0FBQyxDQUFDO0FBQ0o7QUFFQSxJQUFBLGNBQU8sRUFBQyxNQUFNO0VBQ1osVUFBVSxDQUFDLENBQUM7QUFDZCxDQUFDLENBQUM7Ozs7O0FDdENGLENBQUMsTUFBTTtFQUNMLE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQztFQUNqQyxPQUFPLENBQUMsd0JBQXdCLENBQUM7RUFDakMsT0FBTyxDQUFDLDZCQUE2QixDQUFDO0FBQ3hDLENBQUMsRUFBRSxDQUFDOzs7Ozs7Ozs7QUNKSjtBQUNBO0FBQ0E7QUFDQTtBQUNPLE1BQU0sT0FBTyxHQUFJLEVBQUUsSUFBSztFQUM3QixJQUFJLFFBQVEsQ0FBQyxVQUFVLEtBQUssU0FBUyxFQUFFO0lBQ3JDLEVBQUUsQ0FBQyxDQUFDO0VBQ04sQ0FBQyxNQUFNO0lBQ0wsUUFBUSxDQUFDLGdCQUFnQixDQUFDLGtCQUFrQixFQUFFLEVBQUUsQ0FBQztFQUNuRDtBQUNGLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEEsT0FBQSxDQUFBLE9BQUEsR0FBQSxPQUFBO0FBTU8sTUFBTSxRQUFRLEdBQUcsQ0FBQyxFQUFFLEVBQUUsT0FBTyxLQUFLO0VBQ3ZDLElBQUksU0FBUztFQUViLE9BQU8sWUFBbUI7SUFBQSxTQUFBLElBQUEsR0FBQSxTQUFBLENBQUEsTUFBQSxFQUFOLElBQUksT0FBQSxLQUFBLENBQUEsSUFBQSxHQUFBLElBQUEsTUFBQSxJQUFBLEdBQUEsSUFBQSxFQUFBLElBQUE7TUFBSixJQUFJLENBQUEsSUFBQSxJQUFBLFNBQUEsQ0FBQSxJQUFBO0lBQUE7SUFDdEIsWUFBWSxDQUFDLFNBQVMsQ0FBQztJQUN2QixTQUFTLEdBQUcsVUFBVSxDQUFDLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsT0FBTyxDQUFDO0VBQzdELENBQUM7QUFDSCxDQUFDO0FBQUMsT0FBQSxDQUFBLFFBQUEsR0FBQSxRQUFBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IG9uUmVhZHkgfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuZnVuY3Rpb24gZmV0Y2hfcG9zdHMoKSB7XG4gIGNvbnN0IGxvYWRNb3JlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sb2FkLS1tb3JlXCIpO1xuXG4gIGlmIChsb2FkTW9yZUJ0biA9PT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpdGUtbWFpblwiKS5kYXRhc2V0LnBhZ2UgPT0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaXRlLW1haW5cIikuZGF0YXNldC5tYXgpIHtcbiAgICBsb2FkTW9yZUJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIH1cblxuICBsb2FkTW9yZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBsZXQgY3VycmVudFBhZ2UgPSAnJztcblxuICAgIGxldCBwb3N0c0dyaWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvc3RzLWdyaWRcIik7XG5cbiAgICBpZiAoIHBvc3RzR3JpZCApIHtcbiAgICAgIGN1cnJlbnRQYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3N0cy1ncmlkXCIpLmRhdGFzZXQucGFnZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudFBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpdGUtbWFpblwiKS5kYXRhc2V0LnBhZ2U7XG4gICAgfVxuXG4gICAgbGV0IG1heFBhZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaXRlLW1haW5cIikuZGF0YXNldC5tYXg7XG4gICAgbGV0IGlzU2VhcmNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaXRlLW1haW5cIikuZGF0YXNldC5zZWFyY2ggPT09IFwiaXMtc2VhcmNoXCI7XG5cbiAgICBsZXQgc2VhcmNoRmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlYXJjaC1mb3JtX19zZWFyY2gtZmllbGRcIik7XG5cbiAgICBsZXQgc2VhcmNoUXVlcnkgPSAnJztcblxuICAgIGlmICggc2VhcmNoRmllbGQgKSB7XG4gICAgICBzZWFyY2hRdWVyeSA9IHNlYXJjaEZpZWxkLnZhbHVlO1xuICAgIH1cblxuICAgIGxldCBpc0Jsb2NrID0gcG9zdHNHcmlkID8gcG9zdHNHcmlkLmRhdGFzZXQuYmxvY2sgPT09IFwiaXMtYmxvY2tcIiA6IGZhbHNlO1xuXG4gICAgY29uc3QgcG9zdHNHcmlkV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJwb3N0cy1ncmlkX193cmFwcGVyXCIpWzBdO1xuICAgIGNvbnN0IHBvc3RzR3JpZEJ0bldyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwicG9zdHMtZ3JpZF9fYnRuLXdyYXBwZXJcIilbMF07XG5cbiAgICBjb25zdCBtb3JlRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuXG4gICAgbW9yZURhdGEuYXBwZW5kKFwiYWN0aW9uXCIsIFwibG9hZF9tb3JlX3Bvc3RzXCIpO1xuICAgIG1vcmVEYXRhLmFwcGVuZChcImN1cnJlbnRQYWdlXCIsIGN1cnJlbnRQYWdlKTtcbiAgICBtb3JlRGF0YS5hcHBlbmQoXCJzZWFyY2hRdWVyeVwiLCBzZWFyY2hRdWVyeSk7XG4gICAgbW9yZURhdGEuYXBwZW5kKCdfbm9uY2UnLCBXUF92YXJzLm5vbmNlKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gICAgY29uc3QgZGF0YUNhbGwgPSBhd2FpdCBmZXRjaChXUF92YXJzLmFqYXhVUkwsIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGJvZHk6IG1vcmVEYXRhXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpOyAvLyBQYXJzZSB0aGUgSlNPTiByZXNwb25zZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXM6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEuZGF0YSkge1xuICAgICAgICAgIGNvbnN0IGh0bWxTdHJpbmcgPSBkYXRhLmRhdGFbMF07IC8vIEV4dHJhY3QgdGhlIEhUTUwgY29udGVudCBmcm9tIHRoZSByZXNwb25zZVxuXG4gICAgICAgICAgY29uc3QgbWF4UGFnZXMgPSBkYXRhLmRhdGFbMV07XG5cbiAgICAgICAgICBwb3N0c0dyaWRCdG5XcmFwcGVyLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWJlZ2luXCIsIGh0bWxTdHJpbmcpO1xuXG4gICAgICAgICAgaWYgKCAhIGlzU2VhcmNoICYmICEgaXNCbG9jayApIHtcbiAgICAgICAgICAgIGxldCBnZXRVcmwgPSB3aW5kb3cubG9jYXRpb247XG4gICAgICAgICAgICBsZXQgYmFzZVVybCA9IGdldFVybC5wcm90b2NvbCArIFwiLy9cIiArIGdldFVybC5ob3N0ICsgXCIvXCIgKyBnZXRVcmwucGF0aG5hbWUuc3BsaXQoJy8nKVsxXTtcbiAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSgnJywgJycsIGJhc2VVcmwgKyAnL3BhZ2UvJyArIChwYXJzZUludChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpdGUtbWFpblwiKS5kYXRhc2V0LnBhZ2UpICsgMSkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2l0ZS1tYWluXCIpLmRhdGFzZXQucGFnZSsrO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpdGUtbWFpblwiKS5kYXRhc2V0LnBhZ2UgPT0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaXRlLW1haW5cIikuZGF0YXNldC5tYXgpIHtcbiAgICAgICAgICAgIGxvYWRNb3JlQnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIGlzU2VhcmNoICkge1xuICAgICAgICAgICAgaWYgKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpdGUtbWFpblwiKS5kYXRhc2V0LnBhZ2UgPT0gbWF4UGFnZXMgKSB7XG4gICAgICAgICAgICAgIGxvYWRNb3JlQnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdJbnZhbGlkIGRhdGEgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyJyk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS53YXJuKGVycikpO1xuICB9KTtcbn1cblxub25SZWFkeSgoKSA9PiB7XG4gIGZldGNoX3Bvc3RzKCk7XG59KTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBvblJlYWR5IH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbmZ1bmN0aW9uIHNob3dNZW51KCkge1xuICBjb25zdCBuYXZpZ2F0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYWluLW5hdmlnYXRpb25cIik7XG4gIGNvbnN0IG1lbnVJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIjbWFpbi1uYXZpZ2F0aW9uIGxpLmNoaWxkcmVuLXplcm8tbGV2ZWwubWVudS1pdGVtLWhhcy1jaGlsZHJlblwiKTtcbiAgY29uc3QgbWVudU92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxuICAgIFwic2l0ZS1oZWFkZXJfX25hdi1vdmVybGF5XCJcbiAgKVswXTtcbiAgXG5cbiAgaWYgKG5hdmlnYXRpb24gPT09IG51bGwgfHwgbWVudUl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIG1lbnVJdGVtcy5mb3JFYWNoKChtZW51SXRlbSkgPT4ge1xuICAgIG1lbnVJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgbmF2aWdhdGlvbi5jbGFzc0xpc3QuYWRkKFwibWVudS1hY3RpdmVcIik7XG4gICAgICBtZW51T3ZlcmxheS5jbGFzc0xpc3QuYWRkKFwib3ZlcmxheS1hY3RpdmVcIik7XG4gICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgfSk7XG4gIFxuICAgIG1lbnVJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgbmF2aWdhdGlvbi5jbGFzc0xpc3QucmVtb3ZlKFwibWVudS1hY3RpdmVcIik7XG4gICAgICBtZW51T3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKFwib3ZlcmxheS1hY3RpdmVcIik7XG4gICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIFxuICBjb25zdCBzdWJNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnN1Yi1tZW51IGxpLm1lbnUtaXRlbS1oYXMtY2hpbGRyZW4nKTtcbiAgXG4gIHN1Yk1lbnUuZm9yRWFjaCgobWVudUl0ZW0pID0+IHtcbiAgICBtZW51SXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICB9KTtcbiAgXG4gICAgbWVudUl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgfSk7XG4gIH0pO1xuXG59XG5cbmZ1bmN0aW9uIGdldE1haW5OYXZXaWR0aCgpIHtcbiAgY29uc3QgbWFpbk5hdldpZHRoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYWluTmF2V2lkdGhcIik7XG4gIGNvbnN0IGdldFdpZHRoID0gbWFpbk5hdldpZHRoLm9mZnNldFdpZHRoO1xuXG4gIGlmIChnZXRXaWR0aCA9PT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tbWFpbk5hdldpZHRoXCIsIGdldFdpZHRoICsgXCJweFwiKTtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlTGFuZ3VhZ2VTd2l0Y2hlcihpZCwgbWVudUNsYXNzKSB7XG4gIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdO1xuICBjb25zdCBsYW5ndWFnZUljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gIGNvbnN0IGxhbmdTdWJNZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShtZW51Q2xhc3MpWzBdO1xuXG4gIGlmICghbGFuZ3VhZ2VJY29uKSByZXR1cm47XG5cbiAgbGFuZ3VhZ2VJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBsYW5nU3ViTWVudS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgfSk7XG5cbiAgYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGlmICghZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKG1lbnVDbGFzcykpIGxhbmdTdWJNZW51LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gbGFuZ3VhZ2VTd2l0Y2hlcigpIHtcbiAgdG9nZ2xlTGFuZ3VhZ2VTd2l0Y2hlcihcImxhbmd1YWdlSWNvblwiLCBcImxhbmctc3ViLW1lbnVcIik7XG4gIHRvZ2dsZUxhbmd1YWdlU3dpdGNoZXIoXCJsYW5ndWFnZUljb25Nb2JpbGVcIiwgXCJsYW5nLXN1Yi1tZW51LW1vYmlsZVwiKTtcbn1cblxuZnVuY3Rpb24gdHJpZ2dlclNlYXJjaEJveCgpIHtcbiAgY29uc3QgYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF07XG4gIGNvbnN0IHRyaWdnZXJTZWFyY2hCb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRyaWdnZXJTZWFyY2hCb3hcIik7XG4gIGNvbnN0IHRyaWdnZXJTZWFyY2hCb3hNb2JpbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRyaWdnZXJTZWFyY2hCb3hNb2JpbGVcIik7XG4gIGNvbnN0IHNlYXJjaFBvcHVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNpdGUtaGVhZGVyX19zZWFyY2gtcG9wdXBcIilbMF07XG5cbiAgaWYgKHRyaWdnZXJTZWFyY2hCb3ggPT09IG51bGwgfHwgc2VhcmNoUG9wdXAgPT09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVTZWFyY2hCb3hDbGljaygpIHtcbiAgICBzZWFyY2hQb3B1cC5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xuICAgIGJvZHkuY2xhc3NMaXN0LnRvZ2dsZShcImRpc2FibGUtc2Nyb2xsLXNlYXJjaFwiKTtcbiAgfVxuXG4gIGlmICh0cmlnZ2VyU2VhcmNoQm94KSB7XG4gICAgdHJpZ2dlclNlYXJjaEJveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlU2VhcmNoQm94Q2xpY2spO1xuICB9XG5cbiAgaWYgKHRyaWdnZXJTZWFyY2hCb3hNb2JpbGUpIHtcbiAgICB0cmlnZ2VyU2VhcmNoQm94TW9iaWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVTZWFyY2hCb3hDbGljayk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdHJpZ2dlck1vYmlsZU1lbnUoKSB7XG4gIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdO1xuICBjb25zdCBoYW1idXJnZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2l0ZS1oZWFkZXJfX21vYmlsZS13cmFwLS1oYW1idXJnZXJcIilbMF07XG4gIGNvbnN0IG1vYmlsZU1vYmlsZU1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibW9iaWxlLW1lbnVcIilbMF07XG5cbiAgaWYgKGhhbWJ1cmdlciA9PT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGNoaWxkcmVuWmVyb0xldmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI21vYmlsZS1tZW51LW5hdmlnYXRpb24gbGkuY2hpbGRyZW4temVyby1sZXZlbC5tZW51LWl0ZW0taGFzLWNoaWxkcmVuJyk7XG4gIGNvbnN0IGNoaWxkcmVuRmlyc3RMZXZlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNtb2JpbGUtbWVudS1uYXZpZ2F0aW9uIGxpLmNoaWxkcmVuLWZpcnN0LWxldmVsLm1lbnUtaXRlbS1oYXMtY2hpbGRyZW4nKTtcbiAgXG4gIGNoaWxkcmVuWmVyb0xldmVsLmZvckVhY2goKHplcm9JdGVtKSA9PiB7XG4gICAgY29uc3Qgc3ViTWVudVRvZ2dsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBzdWJNZW51VG9nZ2xlLmNsYXNzTGlzdC5hZGQoJ3N1Yi1tZW51LXRvZ2dsZScpO1xuICAgIFxuICAgIHN1Yk1lbnVUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xuICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xuICAgIH0pO1xuICAgIFxuICAgIHplcm9JdGVtLmFwcGVuZENoaWxkKHN1Yk1lbnVUb2dnbGUpO1xuICB9KTtcblxuICBjaGlsZHJlbkZpcnN0TGV2ZWwuZm9yRWFjaCgoZmlyc3RMZXZlbEl0ZW0pID0+IHtcbiAgICBjb25zdCBzdWJNZW51VG9nZ2xlRmlyc3RMZXZlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBzdWJNZW51VG9nZ2xlRmlyc3RMZXZlbC5jbGFzc0xpc3QuYWRkKCdzdWItbWVudS1sZXZlbC10d28tdG9nZ2xlJyk7XG4gIFxuICAgIHN1Yk1lbnVUb2dnbGVGaXJzdExldmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKCdtZW51LWFjdGl2ZScpO1xuICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ21lbnUtYWN0aXZlJyk7XG4gICAgfSk7XG5cbiAgICBmaXJzdExldmVsSXRlbS5hcHBlbmRDaGlsZChzdWJNZW51VG9nZ2xlRmlyc3RMZXZlbCk7XG4gIH0pO1xuXG4gIGhhbWJ1cmdlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwiaGFtYnVyZ2VyLS1hY3RpdmVcIik7XG4gICAgbW9iaWxlTW9iaWxlTWVudS5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xuICAgIGJvZHkuY2xhc3NMaXN0LnRvZ2dsZShcImRpc2FibGUtc2Nyb2xsLXNlYXJjaFwiKTtcbiAgfSk7XG59XG5cbm9uUmVhZHkoKCkgPT4ge1xuICBzaG93TWVudSgpO1xuICBsYW5ndWFnZVN3aXRjaGVyKCk7XG4gIHRyaWdnZXJTZWFyY2hCb3goKTtcbiAgdHJpZ2dlck1vYmlsZU1lbnUoKTtcblxuICAvLyBUT0RPOiBSZW1vdmUgdGhpcyBhZnRlciBmaXhpbmcgdGhlIGZvbnQgbG9hZGluZyBpc3N1ZS5cbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgZ2V0TWFpbk5hdldpZHRoKCk7XG4gIH0sIDIwMDApO1xufSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHsgb25SZWFkeSB9IGZyb20gXCIuLi91dGlsc1wiO1xuXG5mdW5jdGlvbiBpbml0U3dpcGVyKCkge1xuICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGVudC1zbGlkZXJfX3N3aXBlclwiKS5sZW5ndGgpIHJldHVybjtcblxuICBjb25zdCBzd2lwZXIgPSBuZXcgU3dpcGVyKFwiLmNvbnRlbnQtc2xpZGVyX19zd2lwZXJcIiwgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgc2xpZGVzUGVyVmlldzogMSxcbiAgICBzcGFjZUJldHdlZW46IDEzLjksXG4gICAgbG9vcDogdHJ1ZSxcbiAgICBicmVha3BvaW50czoge1xuICAgICAgMDoge1xuICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxuICAgICAgICBzcGFjZUJldHdlZW46IDIwXG4gICAgICB9LFxuICAgICAgNzY4OiB7XG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXG4gICAgICAgIHNwYWNlQmV0d2VlbjogMjBcbiAgICAgIH0sXG4gICAgICAxMzY2OiB7XG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDMsXG4gICAgICAgIHNwYWNlQmV0d2VlbjogMjRcbiAgICAgIH1cbiAgICB9LFxuICAgIHBhZ2luYXRpb246IHtcbiAgICAgIGVsOiBcIi5zd2lwZXItcGFnaW5hdGlvblwiLFxuICAgICAgdHlwZTogXCJwcm9ncmVzc2JhclwiXG4gICAgfSxcbiAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICBwcmV2RWw6IFwiLnN3aXBlci1wYWdpbmF0aW9uX19zd2lwZXItYnV0dG9uLXByZXZcIixcbiAgICAgIG5leHRFbDogXCIuc3dpcGVyLXBhZ2luYXRpb25fX3N3aXBlci1idXR0b24tbmV4dFwiXG4gICAgfVxuICB9KTtcbn1cblxub25SZWFkeSgoKSA9PiB7XG4gIGluaXRTd2lwZXIoKTtcbn0pO1xuIiwiKCgpID0+IHtcbiAgcmVxdWlyZShcIi4vY29tcG9uZW50cy9oZWFkZXIuanNcIik7XG4gIHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvc3dpcGVyLmpzXCIpO1xuICByZXF1aXJlKFwiLi9jb21wb25lbnRzL2ZldGNoLXBvc3RzLmpzXCIpO1xufSkoKTsiLCIvKipcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgdXNlciBkZWZpbmVkIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgb25seSB1cG9uIHN1Y2Nlc3NmdWwgRE9NIGxvYWRcbiAqL1xuZXhwb3J0IGNvbnN0IG9uUmVhZHkgPSAoZm4pID0+IHtcbiAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT09IFwibG9hZGluZ1wiKSB7XG4gICAgZm4oKTtcbiAgfSBlbHNlIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmbik7XG4gIH1cbn07XG5cbi8qKlxuICogRXhlY3V0ZSBhIGdpdmVuIGZ1bmN0aW9uIGFmdGVyIGEgZ2l2aW5nIHRpbWVvdXQgcGVyaW9kXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY2FsbFxuICogQHBhcmFtIHtudW1iZXJ9IHRpbWVvdXQgSW4gbWlsaXNlY29uZHMgdGhlIGFtb3VudCBvZiB0aW1lIHRvIHdhaXRcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAqL1xuZXhwb3J0IGNvbnN0IGRlYm91bmNlID0gKGZuLCB0aW1lb3V0KSA9PiB7XG4gIGxldCB0aW1lb3V0SWQ7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiBmbi5hcHBseSh0aGlzLCBhcmdzKSwgdGltZW91dCk7XG4gIH07XG59OyJdfQ==
